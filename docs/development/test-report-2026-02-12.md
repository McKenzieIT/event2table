# Event2Table é¡µé¢åŠŸèƒ½éªŒè¯æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: 2026-02-12
**æµ‹è¯•è€…**: Claude (è‡ªåŠ¨éªŒè¯)
**æµ‹è¯•èŒƒå›´**: Dashboardé¡µé¢ã€Games APIã€Cardç»„ä»¶

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. Games API SQLé”™è¯¯ä¿®å¤

**é—®é¢˜**:
- `/api/games` è¿”å›ç©ºæ•°ç»„
- æ—¥å¿—æ˜¾ç¤º: `ERROR - Error fetching all as dict: unrecognized token: "#"`

**æ ¹æœ¬åŸå› **:
- SQLæŸ¥è¯¢ä½¿ç”¨äº†`#`ä½œä¸ºæ³¨é‡Šç¬¦å·
- SQLiteåº”è¯¥ä½¿ç”¨`--`è€Œä¸æ˜¯`#`

**ä¿®å¤æ–¹æ¡ˆ**:
```python
# ä¿®å¤å‰ (é”™è¯¯)
LEFT JOIN flow_templates ft ON ft.game_id = g.id  # Note: flow_templates uses game_id FK

# ä¿®å¤å (æ­£ç¡®)
LEFT JOIN flow_templates ft ON ft.game_id = g.id
```

**ä¿®å¤æ–‡ä»¶**: `/Users/mckenzie/Documents/event2table/backend/api/routes/games.py`

**éªŒè¯ç»“æœ**:
```bash
$ curl http://127.0.0.1:5001/api/games
{
  "data": [
    {
      "id": 1,
      "gid": 10000147,
      "name": "Test Game",
      "ods_db": "ieu_ods",
      "event_count": 10,
      "param_count": 5000,
      ...
    },
    ...
  ],
  "success": true
}
```

âœ… **APIç°åœ¨æ­£ç¡®è¿”å›11ä¸ªæ¸¸æˆæ•°æ®**

---

### 2. Cardç»„ä»¶å¤šæ€æ¸²æŸ“æ”¯æŒ

**é—®é¢˜**:
- Dashboardé¡µé¢ä½¿ç”¨ `<Card as={Link}>` è¯­æ³•
- åŸCardç»„ä»¶ä¸æ”¯æŒ`as`å±æ€§ï¼Œåªèƒ½æ¸²æŸ“ä¸ºdiv

**ä¿®å¤æ–¹æ¡ˆ**:
```jsx
// ä¿®å¤å‰
export const Card = React.forwardRef(({
  variant = 'default',
  ...
}, ref) => {
  return (
    <div  // âŒ ç¡¬ç¼–ç ä¸ºdiv
      ref={ref}
      className={`...`}
      {...props}
    >
      {children}
    </div>
  );
});

// ä¿®å¤å
export const Card = React.forwardRef(({
  as: Component = 'div',  // âœ… æ”¯æŒaså±æ€§
  variant = 'default',
  ...
}, ref) => {
  return (
    <Component  // âœ… åŠ¨æ€æ¸²æŸ“
      ref={ref}
      className={`...`}
      {...props}
    >
      {children}
    </Component>
  );
});
```

**ä¿®å¤æ–‡ä»¶**: `/Users/mckenzie/Documents/event2table/frontend/src/shared/ui/Card.jsx`

**éªŒè¯ç»“æœ**:
- âœ… Cardç»„ä»¶æ”¯æŒ`as`å±æ€§
- âœ… Dashboardæ­£ç¡®ä½¿ç”¨ `<Card as={Link} to="/games">`
- âœ… Cardç»„ä»¶æ­£ç¡®ä¼ é€’æ‰€æœ‰props (åŒ…æ‹¬`to`å±æ€§)

---

### 3. Vite APIä»£ç†é…ç½®

**é…ç½®çŠ¶æ€**: âœ… å·²åœ¨vite.config.jsä¸­é…ç½®

```javascript
// vite.config.js
server: {
  port: 5173,
  host: '0.0.0.0',
  strictPort: true,
  proxy: {
    '/api': {
      target: 'http://127.0.0.1:5001',
      changeOrigin: true,
    }
  }
}
```

**éªŒè¯ç»“æœ**:
```bash
$ curl http://localhost:5173/api/games
# æ­£ç¡®è¿”å›Flask APIçš„æ•°æ®ï¼ˆé€šè¿‡Viteä»£ç†ï¼‰
```

âœ… **Viteä»£ç†å·¥ä½œæ­£å¸¸**

---

## ğŸ“Š å½“å‰æœåŠ¡å™¨çŠ¶æ€

| æœåŠ¡ | çŠ¶æ€ | ç«¯å£ | å¤‡æ³¨ |
|------|------|------|------|
| Flask Backend | âœ… è¿è¡Œä¸­ | 5001 | ä½¿ç”¨ç”Ÿäº§æ•°æ®åº“ |
| Vite Frontend | âœ… è¿è¡Œä¸­ | 5173 | ä»£ç†é…ç½®å·²å¯ç”¨ |

---

## ğŸ§ª å¾…æµè§ˆå™¨éªŒè¯çš„é¡¹ç›®

ç”±äºæ— æ³•ä½¿ç”¨curlæµ‹è¯•æµè§ˆå™¨äº¤äº’ï¼Œä»¥ä¸‹é¡¹ç›®éœ€è¦**åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨éªŒè¯**ï¼š

### Dashboardé¡µé¢éªŒè¯æ¸…å•

è®¿é—®: `http://localhost:5173/` æˆ– `http://localhost:5173/dashboard`

#### 1. å¿«é€Ÿæ“ä½œå¡ç‰‡ç‚¹å‡»æµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. è®¿é—®Dashboardé¡µé¢
2. æ‰¾åˆ°"å¿«é€Ÿæ“ä½œ"åŒºåŸŸçš„4ä¸ªå¡ç‰‡
3. ä¾æ¬¡ç‚¹å‡»æ¯ä¸ªå¡ç‰‡

**é¢„æœŸç»“æœ**:
- [ ] ç‚¹å‡»"ç®¡ç†æ¸¸æˆ" â†’ è·³è½¬åˆ° `/games`
- [ ] ç‚¹å‡»"ç®¡ç†äº‹ä»¶" â†’ è·³è½¬åˆ° `/events`
- [ ] ç‚¹å‡»"HQLç”»å¸ƒ" â†’ è·³è½¬åˆ° `/canvas`
- [ ] ç‚¹å‡»"æµç¨‹ç®¡ç†" â†’ è·³è½¬åˆ° `/flows`

**æŠ€æœ¯è¯´æ˜**:
- å¡ç‰‡åº”è¯¥æ¸²æŸ“ä¸º `<a>` æ ‡ç­¾ (React Router Link)
- ç‚¹å‡»åº”è¯¥è§¦å‘è·¯ç”±å¯¼èˆªï¼Œè€Œä¸æ˜¯è¡¨å•æäº¤
- hoveræ•ˆæœåº”è¯¥æ­£å¸¸å·¥ä½œ

#### 2. æœ€è¿‘æ¸¸æˆåˆ—è¡¨æ˜¾ç¤ºæµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. æŸ¥çœ‹Dashboardåº•éƒ¨"æœ€è¿‘æ¸¸æˆ"åŒºåŸŸ
2. éªŒè¯æ˜¯å¦æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨

**é¢„æœŸç»“æœ**:
- [ ] æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨ (åº”è¯¥æ˜¾ç¤º11ä¸ªæ¸¸æˆä¸­çš„å‰5ä¸ª)
- [ ] æ¯ä¸ªæ¸¸æˆæ˜¾ç¤º: åç§°ã€GIDã€äº‹ä»¶æ•°ã€å‚æ•°æ•°
- [ ] ç‚¹å‡»æ¸¸æˆå¡ç‰‡ â†’ è·³è½¬åˆ° `/events?game_gid={gid}`

**æŠ€æœ¯è¯´æ˜**:
- Dashboardä» `/api/games` è·å–æ¸¸æˆæ•°æ®
- ä½¿ç”¨ `useQuery` hookè¿›è¡Œæ•°æ®è·å–
- æ¡ä»¶æ¸²æŸ“: `{stats.gameCount > 0 && ...}`

#### 3. ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºæµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. æŸ¥çœ‹"ç»Ÿè®¡å¡ç‰‡"åŒºåŸŸ
2. éªŒè¯æ•°å­—æ˜¯å¦æ­£ç¡®

**é¢„æœŸç»“æœ**:
- [ ] æ¸¸æˆæ€»æ•°: 11
- [ ] äº‹ä»¶æ€»æ•°: > 0 (åº”è¯¥è‡³å°‘10ä¸ª)
- [ ] å‚æ•°æ€»æ•°: > 0 (åº”è¯¥è‡³å°‘5000ä¸ª)

---

## ğŸ” å·²çŸ¥é—®é¢˜å’Œåç»­å·¥ä½œ

### P1 - Eventsé¡µé¢åŠŸèƒ½å¢å¼º

æ ¹æ®è®¡åˆ’æ–‡ä»¶ [steady-questing-tide.md](.claude/plans/steady-questing-tide.md)ï¼ŒEventsé¡µé¢éœ€è¦æ·»åŠ ï¼š

1. **æ‰¹é‡å¯¼å…¥åŠŸèƒ½**
   - æ”¯æŒExcelæ–‡ä»¶ä¸Šä¼ 
   - é¢„è§ˆå¯¼å…¥æ•°æ®
   - å‚æ•°åº“åŒ¹é…

2. **å¯¼å‡ºåŠŸèƒ½**
   - å¯¼å‡ºä¸ºExcel/CSVæ ¼å¼
   - å¯é€‰æ‹©å¯¼å‡ºèŒƒå›´

3. **å¿«é€Ÿç¼–è¾‘**
   - åŒå‡»äº‹ä»¶è¡Œè¿›å…¥ç¼–è¾‘æ¨¡å¼

### P2 - æ¶æ„ç†è§£è®°å½•

å·²è®°å½•åˆ°å¼€å‘æ–‡æ¡£ï¼š
- Events â†’ EventNodeBuilder â†’ Canvas çš„æ­£ç¡®æµç¨‹
- Eventsä¸éœ€è¦ä¸CanvasåŒå‘é›†æˆ
- EventNodeBuilderæ˜¯å•äº‹ä»¶èŠ‚ç‚¹é…ç½®å™¨

---

## ğŸ“ æµ‹è¯•ç»“è®º

### è‡ªåŠ¨éªŒè¯ç»“æœ (âœ… å®Œæˆ)

1. âœ… **Games API**: ä¿®å¤SQLé”™è¯¯ï¼Œç°åœ¨æ­£ç¡®è¿”å›æ¸¸æˆæ•°æ®
2. âœ… **Cardç»„ä»¶**: å·²æ·»åŠ `as`å±æ€§æ”¯æŒå¤šæ€æ¸²æŸ“
3. âœ… **Viteä»£ç†**: é…ç½®æ­£ç¡®ï¼ŒAPIè¯·æ±‚æˆåŠŸè½¬å‘
4. âœ… **Flaskåç«¯**: è¿è¡Œåœ¨æ­£ç¡®çš„æ•°æ®åº“ (ç”Ÿäº§DB)

### éœ€è¦æ‰‹åŠ¨éªŒè¯çš„é¡¹ç›®

1. â³ **Dashboardå¡ç‰‡ç‚¹å‡»**: éœ€è¦æµè§ˆå™¨éªŒè¯å¯¼èˆªåŠŸèƒ½
2. â³ **æœ€è¿‘æ¸¸æˆåˆ—è¡¨**: éœ€è¦éªŒè¯æ•°æ®æ˜¾ç¤º
3. â³ **ç»Ÿè®¡å¡ç‰‡**: éœ€è¦éªŒè¯æ•°å­—å‡†ç¡®æ€§

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³æ‰§è¡Œ**:
1. åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:5173`
2. ä¾æ¬¡éªŒè¯ä¸Šè¿°"å¾…æµè§ˆå™¨éªŒè¯çš„é¡¹ç›®"
3. è®°å½•éªŒè¯ç»“æœ

**åç»­å¼€å‘**:
1. Eventsé¡µé¢åŠŸèƒ½å¢å¼º (P1ä¼˜å…ˆçº§)
2. å…¶ä»–é¡µé¢è¿ç§»é—®é¢˜ä¿®å¤

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-02-12 11:58
**éªŒè¯å·¥å…·**: curl + sqlite3 + Python
**æœåŠ¡å™¨çŠ¶æ€**: Flask + Vite å‡è¿è¡Œä¸­
