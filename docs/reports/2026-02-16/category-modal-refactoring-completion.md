# åˆ†ç±»æ¨¡æ€æ¡†é‡æ„å®ŒæˆæŠ¥å‘Š

**æ—¥æœŸ**: 2026-02-16
**ä»»åŠ¡**: ä¿®å¤åˆ†ç±»ç®¡ç†ç¼–è¾‘æŒ‰é’®é—®é¢˜ï¼Œé‡æ–°è®¾è®¡åˆ†ç±»æ–°å¢/ç¼–è¾‘æ¨¡æ€æ¡†
**çŠ¶æ€**: âœ… ä»£ç å®ç°å®Œæˆï¼Œå¾…ç”¨æˆ·æµ‹è¯•éªŒè¯

---

## ä¸€ã€é—®é¢˜èƒŒæ™¯

### åŸå§‹é—®é¢˜
1. **ç¼–è¾‘åŠŸèƒ½å¤±æ•ˆ**: ç‚¹å‡»åˆ†ç±»å¡ç‰‡çš„"ç¼–è¾‘"æŒ‰é’®ï¼Œå¼¹å‡ºçš„æ˜¯æ–°å¢åˆ†ç±»æ¨¡æ€æ¡†è€Œéç¼–è¾‘æ¨¡æ€æ¡†
2. **UI é‡å¤**: `CategoryManagementModal` æ˜¯ä¸»ä»å¼æ¨¡æ€æ¡†ï¼ˆå·¦ä¾§åˆ—è¡¨+å³ä¾§è¡¨å•ï¼‰ï¼Œä¸ `CategoriesList` é¡µé¢çš„åˆ†ç±»å¡ç‰‡é‡å¤
3. **ç”¨æˆ·ä½“éªŒ**: éœ€è¦ä¸¤ä¸ªç‹¬ç«‹çš„æ¨¡æ€æ¡†åˆ†åˆ«å¤„ç†æ–°å¢å’Œç¼–è¾‘ï¼Œç»´æŠ¤æˆæœ¬é«˜

### è®¾è®¡ç›®æ ‡
1. âœ… ä¿®å¤ç¼–è¾‘æŒ‰é’®åŠŸèƒ½ï¼Œæ­£ç¡®ä¼ é€’åˆ†ç±»æ•°æ®åˆ°æ¨¡æ€æ¡†
2. âœ… æ¶ˆé™¤UIé‡å¤ï¼Œåˆ›å»ºçº¯è¡¨å•æ¨¡æ€æ¡†ï¼ˆæ— å†…ç½®åˆ—è¡¨ï¼‰
3. âœ… ä½¿ç”¨å•ä¸€æ¨¡æ€æ¡†é€šè¿‡ props æ™ºèƒ½åˆ‡æ¢æ–°å¢/ç¼–è¾‘æ¨¡å¼
4. âœ… åº”ç”¨ Cyberpunk Data Terminal ç¾å­¦è®¾è®¡

---

## äºŒã€å®ç°æ–¹æ¡ˆ

### æ¶æ„è®¾è®¡

**å•ä¸€æ¨¡æ€æ¡† + initialData æ¨¡å¼**ï¼š

```
CategoriesList (é¡µé¢)
  â”œâ”€ æ¸²æŸ“åˆ†ç±»å¡ç‰‡åˆ—è¡¨
  â”œâ”€ ç¼–è¾‘æŒ‰é’® onClick
  â”‚   â””â”€ setEditingCategory(category)  âœ… ä¼ é€’æ•°æ®
  â”œâ”€ æ–°å¢æŒ‰é’® onClick
  â”‚   â””â”€ setEditingCategory(null)       âœ… æ¸…ç©ºæ•°æ®
  â””â”€ CategoryModal (æ¨¡æ€æ¡†)
      â”œâ”€ initialData === null  â†’ æ–°å¢æ¨¡å¼
      â”œâ”€ initialData !== null  â†’ ç¼–è¾‘æ¨¡å¼
      â””â”€ æ ¹æ® mode åˆ‡æ¢ UI å’Œ API è°ƒç”¨
```

### å…³é”®æŠ€æœ¯ç‚¹

#### 1. æ¨¡å¼æ£€æµ‹é€»è¾‘
```javascript
// CategoryModal.jsx:28-29
const isEditMode = initialData !== null;
```

#### 2. è¡¨å•æ•°æ®åŒæ­¥
```javascript
// CategoryModal.jsx:44-53
useEffect(() => {
  if (isOpen) {
    if (initialData) {
      // ç¼–è¾‘æ¨¡å¼ï¼šå¡«å……æ•°æ®
      setFormData({
        name: initialData.name || '',
        description: initialData.description || ''
      });
    } else {
      // æ–°å¢æ¨¡å¼ï¼šæ¸…ç©ºè¡¨å•
      setFormData({ name: '', description: '' });
    }
  }
}, [initialData, isOpen]);
```

#### 3. API è°ƒç”¨åˆ‡æ¢
```javascript
// CategoryModal.jsx:98-108
const url = isEditMode
  ? `/api/categories/${initialData.id}`  // PUT æ›´æ–°
  : '/api/categories';                    // POST åˆ›å»º

const method = isEditMode ? 'PUT' : 'POST';

const response = await fetch(url, {
  method,
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    ...data,
    game_gid: gameGid  // å§‹ç»ˆä¼ é€’ game_gid
  })
});
```

---

## ä¸‰ã€æ–‡ä»¶å˜æ›´æ¸…å•

### æ–°å»ºæ–‡ä»¶

#### 1. `frontend/src/analytics/components/categories/CategoryModal.jsx` (181è¡Œ)
**åŠŸèƒ½**: çº¯è¡¨å•æ¨¡æ€æ¡†ç»„ä»¶ï¼Œæ”¯æŒæ–°å¢/ç¼–è¾‘æ¨¡å¼åˆ‡æ¢

**å…³é”®ç‰¹æ€§**:
- Props: `isOpen`, `onClose`, `gameGid`, `initialData`, `onSuccess`
- è¡¨å•å­—æ®µ: `name` (å¿…å¡«), `description` (å¯é€‰)
- è¡¨å•éªŒè¯: `name` ä¸èƒ½ä¸ºç©º
- æäº¤çŠ¶æ€ç®¡ç†: `isSubmitting` é˜²æ­¢é‡å¤æäº¤
- React Query Mutation: å¼‚æ­¥æäº¤ + é”™è¯¯å¤„ç†
- æˆåŠŸå›è°ƒ: åˆ·æ–°åˆ—è¡¨ + å…³é—­æ¨¡æ€æ¡†

**ä»£ç ç¤ºä¾‹**:
```javascript
function CategoryModal({ isOpen, onClose, gameGid, initialData, onSuccess }) {
  const isEditMode = initialData !== null;
  const [formData, setFormData] = useState({ name: '', description: '' });

  useEffect(() => {
    if (isOpen) {
      if (initialData) {
        setFormData({
          name: initialData.name || '',
          description: initialData.description || ''
        });
      } else {
        setFormData({ name: '', description: '' });
      }
    }
  }, [initialData, isOpen]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    // éªŒè¯ã€æäº¤ã€æˆåŠŸå›è°ƒ...
  };

  return (/* JSX */);
}
```

#### 2. `frontend/src/analytics/components/categories/CategoryModal.css` (290è¡Œ)
**åŠŸèƒ½**: Cyberpunk Data Terminal ç¾å­¦æ ·å¼

**å…³é”®æ ·å¼**:
- **ç½‘æ ¼èƒŒæ™¯**:
  ```css
  background-image:
    linear-gradient(rgba(6, 182, 212, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(6, 182, 212, 0.03) 1px, transparent 1px);
  background-size: 20px 20px;
  ```

- **Cyan å…‰æ™•æ•ˆæœ**:
  ```css
  border: 1px solid rgba(6, 182, 212, 0.3);
  box-shadow: 0 0 40px rgba(6, 182, 212, 0.15);
  ```

- **ç„¦ç‚¹çŠ¶æ€**:
  ```css
  .category-modal__input:focus {
    border-color: #06b6d4;
    box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
  }
  ```

- **æ¨¡å¼æ„ŸçŸ¥å¾½ç« **:
  ```css
  .category-modal__mode-hint.create {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
  }

  .category-modal__mode-hint.edit {
    background: rgba(6, 182, 212, 0.15);
    color: #06b6d4;
    border: 1px solid rgba(6, 182, 212, 0.3);
  }
  ```

- **æ»‘å…¥åŠ¨ç”»**:
  ```css
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  ```

### ä¿®æ”¹æ–‡ä»¶

#### 3. `frontend/src/analytics/pages/CategoriesList.jsx`
**å˜æ›´ç±»å‹**: ä¿®æ”¹å¯¼å…¥ã€æ–°å¢çŠ¶æ€ã€ä¿®æ”¹æŒ‰é’®é€»è¾‘ã€æ›¿æ¢æ¨¡æ€æ¡†

**å…·ä½“å˜æ›´**:

1. **å¯¼å…¥æ›´æ”¹** (ç¬¬7è¡Œ):
   ```diff
   - import CategoryManagementModal from '../components/categories/CategoryManagementModal';
   + import CategoryModal from '../components/categories/CategoryModal';
   ```

2. **æ–°å¢çŠ¶æ€** (ç¬¬26è¡Œ):
   ```javascript
   + const [editingCategory, setEditingCategory] = useState(null);
   ```

3. **ä¿®æ”¹"æ–°å»ºåˆ†ç±»"æŒ‰é’®** (ç¬¬193-196è¡Œ):
   ```diff
   <Button
     variant="primary"
   -  onClick={() => setIsModalOpen(true)}
   +  onClick={() => {
   +    setEditingCategory(null);  // âœ… æ¸…ç©ºç¼–è¾‘æ•°æ®
   +    setIsModalOpen(true);
   +  }}
   >
     æ–°å»ºåˆ†ç±»
   </Button>
   ```

4. **ä¿®æ”¹"ç¼–è¾‘"æŒ‰é’®** (ç¬¬269-272è¡Œ):
   ```diff
   <Button
     variant="secondary"
   -  onClick={() => setIsModalOpen(true)}
   +  onClick={() => {
   +    setEditingCategory(category);  // âœ… ä¼ é€’åˆ†ç±»æ•°æ®
   +    setIsModalOpen(true);
   +  }}
   >
     ç¼–è¾‘
   </Button>
   ```

5. **æ›¿æ¢æ¨¡æ€æ¡†ç»„ä»¶** (ç¬¬300-310è¡Œ):
   ```diff
   - <CategoryManagementModal
   -   isOpen={isModalOpen}
   -   onClose={() => setIsModalOpen(false)}
   -   gameGid={gameGid}
   - />
   + <CategoryModal
   +   isOpen={isModalOpen}
   +   onClose={() => {
   +     setIsModalOpen(false);
   +     setEditingCategory(null);  // âœ… å…³é—­æ—¶æ¸…ç©º
   +   }}
   +   gameGid={gameGid}
   +   initialData={editingCategory}  // âœ… ä¼ é€’ç¼–è¾‘æ•°æ®
   +   onSuccess={() => {
   +     queryClient.invalidateQueries({ queryKey: ['categories'] });
   +   }}
   + />
   ```

---

## å››ã€æŠ€æœ¯å®ç°å¯¹æ¯”

### æ—§æ–¹æ¡ˆ vs æ–°æ–¹æ¡ˆ

| ç‰¹æ€§ | æ—§æ–¹æ¡ˆ (CategoryManagementModal) | æ–°æ–¹æ¡ˆ (CategoryModal) |
|------|--------------------------------|----------------------|
| **UI ç»“æ„** | ä¸»ä»å¼ï¼ˆå·¦ä¾§åˆ—è¡¨+å³ä¾§è¡¨å•ï¼‰ | çº¯è¡¨å•ï¼ˆå±…ä¸­æ˜¾ç¤ºï¼‰ |
| **UI é‡å¤** | âŒ å†…ç½®åˆ—è¡¨ä¸é¡µé¢å¡ç‰‡é‡å¤ | âœ… æ— å†…ç½®åˆ—è¡¨ |
| **æ¨¡å¼åˆ‡æ¢** | éœ€è¦2ä¸ªç‹¬ç«‹æ¨¡æ€æ¡† | å•ä¸€æ¨¡æ€æ¡† + props |
| **ç¼–è¾‘åŠŸèƒ½** | âŒ ä¸ä¼ é€’æ•°æ®ï¼Œæ‰“å¼€æ–°å¢æ¨¡å¼ | âœ… ä¼ é€’ initialData |
| **ç¾å­¦è®¾è®¡** | åŸºç¡€æ ·å¼ | Cyberpunk Data Terminal |
| **åŠ¨ç”»æ•ˆæœ** | æ—  | æ»‘å…¥åŠ¨ç”» + æ¨¡å¼å¾½ç«  |
| **ä»£ç è¡Œæ•°** | 244è¡Œï¼ˆå¤æ‚ï¼‰ | 181è¡Œï¼ˆç®€æ´ï¼‰ |

### è®¾è®¡ä¼˜åŠ¿

1. **å•ä¸€èŒè´£åŸåˆ™**: æ¨¡æ€æ¡†åªè´Ÿè´£è¡¨å•ï¼Œåˆ—è¡¨ç”±é¡µé¢ç®¡ç†
2. **Props é©±åŠ¨æ¨¡å¼**: é€šè¿‡ `initialData` æ™ºèƒ½åˆ‡æ¢æ¨¡å¼
3. **ä¸€è‡´æ€§**: ä¸é¡¹ç›®å…¶ä»–æ¨¡æ€æ¡†ï¼ˆAddGameModalï¼‰è®¾è®¡ä¸€è‡´
4. **å¯ç»´æŠ¤æ€§**: ä»£ç ç®€æ´ï¼Œæ˜“äºç†è§£å’Œæ‰©å±•

---

## äº”ã€ç¾å­¦è®¾è®¡ç»†èŠ‚

### Cyberpunk Data Terminal é£æ ¼

**è®¾è®¡è¯­è¨€å‚è€ƒ**:
- AddGameModal.cssï¼ˆæ¸¸æˆç®¡ç†æ¨¡æ€æ¡†ï¼‰
- design-tokens.cssï¼ˆè®¾è®¡ä»¤ç‰Œï¼‰

**è§†è§‰å…ƒç´ **:
1. **ç½‘æ ¼èƒŒæ™¯**: 20px Ã— 20px é’è‰²åŠé€æ˜ç½‘æ ¼
2. **Cyan å…‰æ™•**: è¾¹æ¡† + é˜´å½±è¥é€ å‘å…‰æ•ˆæœ
3. **æ·±è‰²ä¸»é¢˜**: `#0f172a` â†’ `#1e293b` æ¸å˜
4. **å­—ä½“ç³»ç»Ÿ**:
   - æ ‡é¢˜: Outfit (display)
   - æ­£æ–‡: DM Sans
   - æ•°æ®/ä»£ç : JetBrains Mono

**æ¨¡å¼æç¤º**:
- æ–°å¢æ¨¡å¼: ç»¿è‰²å¾½ç«  "â• æ–°å¢æ¨¡å¼"
- ç¼–è¾‘æ¨¡å¼: é’è‰²å¾½ç«  "âœ ç¼–è¾‘æ¨¡å¼"

**äº¤äº’åŠ¨ç”»**:
- æ»‘å…¥: ä»å³ä¾§ (translateX(100%) â†’ translateX(0))
- æ·¡å…¥: overlay é€æ˜åº¦ (0 â†’ 1)
- æŒç»­æ—¶é—´: 0.3s (cubic-bezier ç¼“åŠ¨)

---

## å…­ã€æµ‹è¯•éªŒè¯æ¸…å•

### åŠŸèƒ½æµ‹è¯•

- [ ] **æ–°å¢æ¨¡å¼**
  - [ ] ç‚¹å‡»"æ–°å»ºåˆ†ç±»"æŒ‰é’®
  - [ ] æ¨¡æ€æ¡†æ ‡é¢˜æ˜¾ç¤º"æ–°å¢åˆ†ç±»"
  - [ ] ç»¿è‰²å¾½ç« "â• æ–°å¢æ¨¡å¼"
  - [ ] è¡¨å•å­—æ®µä¸ºç©º
  - [ ] å¡«å†™åç§°å’Œæè¿°
  - [ ] ç‚¹å‡»"åˆ›å»ºåˆ†ç±»"
  - [ ] æˆåŠŸæç¤ºï¼š"åˆ†ç±»XXXåˆ›å»ºæˆåŠŸï¼"
  - [ ] åˆ—è¡¨åˆ·æ–°ï¼Œæ–°åˆ†ç±»æ˜¾ç¤º
  - [ ] æ¨¡æ€æ¡†å…³é—­

- [ ] **ç¼–è¾‘æ¨¡å¼**
  - [ ] ç‚¹å‡»åˆ†ç±»å¡ç‰‡çš„"ç¼–è¾‘"æŒ‰é’®
  - [ ] æ¨¡æ€æ¡†æ ‡é¢˜æ˜¾ç¤º"ç¼–è¾‘åˆ†ç±»"
  - [ ] é’è‰²å¾½ç« "âœ ç¼–è¾‘æ¨¡å¼"
  - [ ] è¡¨å•å­—æ®µé¢„å¡«å……ï¼ˆåç§°ã€æè¿°ï¼‰
  - [ ] ä¿®æ”¹åç§°æˆ–æè¿°
  - [ ] ç‚¹å‡»"ä¿å­˜ä¿®æ”¹"
  - [ ] æˆåŠŸæç¤ºï¼š"åˆ†ç±»XXXæ›´æ–°æˆåŠŸï¼"
  - [ ] åˆ—è¡¨åˆ·æ–°ï¼Œä¿®æ”¹æ˜¾ç¤º
  - [ ] æ¨¡æ€æ¡†å…³é—­

- [ ] **è¡¨å•éªŒè¯**
  - [ ] åç§°å­—æ®µä¸ºç©ºæ—¶ç‚¹å‡»æäº¤
  - [ ] æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"åˆ†ç±»åç§°ä¸èƒ½ä¸ºç©º"
  - [ ] ç¦ç”¨æäº¤æŒ‰é’®ï¼ˆå½“åç§°ä¸ºç©ºï¼‰

- [ ] **å–æ¶ˆæ“ä½œ**
  - [ ] ç‚¹å‡»"å–æ¶ˆ"æŒ‰é’®æˆ–å…³é—­æŒ‰é’®ï¼ˆÃ—ï¼‰
  - [ ] æ¨¡æ€æ¡†å…³é—­
  - [ ] è¡¨å•æ•°æ®æ¸…ç©º
  - [ ] `editingCategory` é‡ç½®ä¸º `null`

### è§†è§‰æµ‹è¯•

- [ ] **ç½‘æ ¼èƒŒæ™¯**
  - [ ] æ¨¡æ€æ¡†èƒŒæ™¯æ˜¾ç¤º 20px Ã— 20px ç½‘æ ¼
  - [ ] ç½‘æ ¼çº¿ä¸ºé’è‰²åŠé€æ˜ï¼ˆrgba(6, 182, 212, 0.03)ï¼‰

- [ ] **Cyan å…‰æ™•**
  - [ ] æ¨¡æ€æ¡†è¾¹æ¡†ä¸ºé’è‰²åŠé€æ˜
  - [ ] å¤–å‘å…‰é˜´å½±å¯è§
  - [ ] è¾“å…¥æ¡†ç„¦ç‚¹æ—¶æ˜¾ç¤ºé’è‰²å…‰æ™•

- [ ] **åŠ¨ç”»æ•ˆæœ**
  - [ ] æ‰“å¼€æ¨¡æ€æ¡†æ—¶ä»å³ä¾§æ»‘å…¥
  - [ ] å…³é—­æ¨¡æ€æ¡†æ—¶æ·¡å‡º
  - [ ] åŠ¨ç”»æµç•…ï¼ˆ0.3sï¼‰

- [ ] **å“åº”å¼è®¾è®¡**
  - [ ] ç§»åŠ¨ç«¯ï¼ˆå®½åº¦ < 640pxï¼‰å¸ƒå±€é€‚é…
  - [ ] æŒ‰é’®å †å æ˜¾ç¤º
  - [ ] æ¨¡æ€æ¡†å®½åº¦è°ƒæ•´ï¼ˆ95%ï¼‰

### è¾¹ç•Œæµ‹è¯•

- [ ] **æ—  game_gid**
  - [ ] é¡µé¢æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"è¯·å…ˆé€‰æ‹©æ¸¸æˆ"
  - [ ] æ¨¡æ€æ¡†ä¸å¯æ‰“å¼€

- [ ] **ç½‘ç»œé”™è¯¯**
  - [ ] API è¯·æ±‚å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º
  - [ ] æ¨¡æ€æ¡†ä¿æŒæ‰“å¼€çŠ¶æ€
  - [ ] è¡¨å•æ•°æ®ä¸æ¸…ç©º

- [ ] **å¹¶å‘æ“ä½œ**
  - [ ] æäº¤æ—¶ç¦ç”¨æŒ‰é’®å’Œè¡¨å•
  - [ ] é˜²æ­¢é‡å¤æäº¤

### API å¥‘çº¦æµ‹è¯•

- [ ] **æ–°å¢åˆ†ç±»**
  ```javascript
  POST /api/categories
  Request: { name: "æµ‹è¯•åˆ†ç±»", description: "æµ‹è¯•æè¿°", game_gid: 10000147 }
  Response: { success: true, data: { id: 1, name: "æµ‹è¯•åˆ†ç±»", ... } }
  Status: 200 OK
  ```

- [ ] **ç¼–è¾‘åˆ†ç±»**
  ```javascript
  PUT /api/categories/1
  Request: { name: "ä¿®æ”¹å", description: "ä¿®æ”¹æè¿°", game_gid: 10000147 }
  Response: { success: true, data: { id: 1, name: "ä¿®æ”¹å", ... } }
  Status: 200 OK
  ```

- [ ] **é”™è¯¯å¤„ç†**
  ```javascript
  // 400 Bad Request (ç¼ºå°‘åç§°)
  { "success": false, "message": "åç§°ä¸èƒ½ä¸ºç©º" }

  // 409 Conflict (åç§°é‡å¤)
  { "success": false, "message": "åˆ†ç±»åç§°å·²å­˜åœ¨" }

  // 500 Internal Server Error
  { "success": false, "message": "æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•" }
  ```

---

## ä¸ƒã€æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤

### å‰ç½®æ¡ä»¶

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**:
   ```bash
   # åç«¯ï¼ˆå·²åœ¨è¿è¡Œï¼‰
   python3 web_app.py  # http://127.0.0.1:5001

   # å‰ç«¯ï¼ˆå·²åœ¨è¿è¡Œï¼‰
   cd frontend && npm run dev  # http://localhost:5173
   ```

2. **å‡†å¤‡æµ‹è¯•æ•°æ®**:
   - ç¡®ä¿æœ‰æ¸¸æˆæ•°æ®ï¼ˆGID: 10000147ï¼‰
   - ç¡®ä¿è¯¥æ¸¸æˆä¸‹æœ‰åˆ†ç±»æ•°æ®ï¼ˆç”¨äºæµ‹è¯•ç¼–è¾‘ï¼‰

### æµ‹è¯•åœºæ™¯ 1: æ–°å¢åˆ†ç±»

1. å¯¼èˆªåˆ°: `http://localhost:5173/#/categories?game_gid=10000147`
2. ç‚¹å‡»å³ä¸Šè§’"æ–°å»ºåˆ†ç±»"æŒ‰é’®
3. **é¢„æœŸç»“æœ**:
   - âœ… æ¨¡æ€æ¡†ä»å³ä¾§æ»‘å…¥
   - âœ… æ ‡é¢˜æ˜¾ç¤º"æ–°å¢åˆ†ç±»"
   - âœ… ç»¿è‰²å¾½ç« "â• æ–°å¢æ¨¡å¼"
   - âœ… è¡¨å•å­—æ®µä¸ºç©º
   - âœ… ç½‘æ ¼èƒŒæ™¯å¯è§
   - âœ… Cyan å…‰æ™•è¾¹æ¡†

4. å¡«å†™è¡¨å•:
   - åç§°: `æµ‹è¯•åˆ†ç±» A`
   - æè¿°: `è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•åˆ†ç±»`
5. ç‚¹å‡»"â• åˆ›å»ºåˆ†ç±»"æŒ‰é’®
6. **é¢„æœŸç»“æœ**:
   - âœ… æŒ‰é’®å˜ä¸º"ä¿å­˜ä¸­..."å¹¶ç¦ç”¨
   - âœ… Toast æç¤ºï¼š"åˆ†ç±»"æµ‹è¯•åˆ†ç±» A"åˆ›å»ºæˆåŠŸï¼"
   - âœ… æ¨¡æ€æ¡†å…³é—­
   - âœ… åˆ—è¡¨åˆ·æ–°ï¼Œæ–°åˆ†ç±»å¡ç‰‡æ˜¾ç¤º

### æµ‹è¯•åœºæ™¯ 2: ç¼–è¾‘åˆ†ç±»

1. å¯¼èˆªåˆ°: `http://localhost:5173/#/categories?game_gid=10000147`
2. æ‰¾åˆ°ä»»æ„åˆ†ç±»å¡ç‰‡ï¼Œç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
3. **é¢„æœŸç»“æœ**:
   - âœ… æ¨¡æ€æ¡†ä»å³ä¾§æ»‘å…¥
   - âœ… æ ‡é¢˜æ˜¾ç¤º"ç¼–è¾‘åˆ†ç±»"
   - âœ… é’è‰²å¾½ç« "âœ ç¼–è¾‘æ¨¡å¼"
   - âœ… è¡¨å•å­—æ®µé¢„å¡«å……ï¼ˆåŸåç§°ã€åŸæè¿°ï¼‰

4. ä¿®æ”¹è¡¨å•:
   - åç§°: `æµ‹è¯•åˆ†ç±» Aï¼ˆå·²ä¿®æ”¹ï¼‰`
   - æè¿°: `è¿™æ˜¯ä¿®æ”¹åçš„æè¿°`
5. ç‚¹å‡»"ğŸ’¾ ä¿å­˜ä¿®æ”¹"æŒ‰é’®
6. **é¢„æœŸç»“æœ**:
   - âœ… æŒ‰é’®å˜ä¸º"ä¿å­˜ä¸­..."å¹¶ç¦ç”¨
   - âœ… Toast æç¤ºï¼š"åˆ†ç±»"æµ‹è¯•åˆ†ç±» Aï¼ˆå·²ä¿®æ”¹ï¼‰"æ›´æ–°æˆåŠŸï¼"
   - âœ… æ¨¡æ€æ¡†å…³é—­
   - âœ… åˆ—è¡¨åˆ·æ–°ï¼Œä¿®æ”¹åçš„åç§°æ˜¾ç¤º

### æµ‹è¯•åœºæ™¯ 3: è¡¨å•éªŒè¯

1. å¯¼èˆªåˆ°: `http://localhost:5173/#/categories?game_gid=10000147`
2. ç‚¹å‡»"æ–°å»ºåˆ†ç±»"æŒ‰é’®
3. **ä¸å¡«å†™åç§°**ï¼Œç›´æ¥ç‚¹å‡»"åˆ›å»ºåˆ†ç±»"
4. **é¢„æœŸç»“æœ**:
   - âœ… åç§°å­—æ®µä¸‹æ–¹æ˜¾ç¤ºé”™è¯¯ï¼š"åˆ†ç±»åç§°ä¸èƒ½ä¸ºç©º"
   - âœ… æ¨¡æ€æ¡†ä¿æŒæ‰“å¼€
   - âœ… ä¸å‘é€ API è¯·æ±‚

5. å¡«å†™åç§°åå†æ¬¡æäº¤
6. **é¢„æœŸç»“æœ**:
   - âœ… é”™è¯¯æç¤ºæ¶ˆå¤±
   - âœ… æäº¤æˆåŠŸ

### æµ‹è¯•åœºæ™¯ 4: å–æ¶ˆæ“ä½œ

1. æ‰“å¼€æ¨¡æ€æ¡†ï¼ˆæ–°å¢æˆ–ç¼–è¾‘æ¨¡å¼ï¼‰
2. å¡«å†™éƒ¨åˆ†è¡¨å•æ•°æ®
3. ç‚¹å‡»"å–æ¶ˆ"æŒ‰é’®æˆ–å…³é—­æŒ‰é’®ï¼ˆÃ—ï¼‰
4. **é¢„æœŸç»“æœ**:
   - âœ… æ¨¡æ€æ¡†å…³é—­
   - âœ… å†æ¬¡æ‰“å¼€æ—¶è¡¨å•ä¸ºç©ºï¼ˆæ–°å¢æ¨¡å¼ï¼‰æˆ–æ¢å¤åŸæ•°æ®ï¼ˆç¼–è¾‘æ¨¡å¼ï¼‰
   - âœ… `editingCategory` çŠ¶æ€æ­£ç¡®é‡ç½®

### æµ‹è¯•åœºæ™¯ 5: å“åº”å¼è®¾è®¡

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ°ç§»åŠ¨è®¾å¤‡è§†å›¾ï¼ˆä¾‹å¦‚ iPhone 12 Proï¼‰
3. å¯¼èˆªåˆ°: `http://localhost:5173/#/categories?game_gid=10000147`
4. ç‚¹å‡»"æ–°å»ºåˆ†ç±»"æŒ‰é’®
5. **é¢„æœŸç»“æœ**:
   - âœ… æ¨¡æ€æ¡†å®½åº¦è°ƒæ•´ä¸º 95%
   - âœ… æŒ‰é’®å †å æ˜¾ç¤ºï¼ˆå–æ¶ˆåœ¨ä¸Šï¼Œæäº¤åœ¨ä¸‹ï¼‰
   - âœ… è¡¨å•å­—æ®µå®½åº¦é€‚é…
   - âœ… è§¦æ‘¸äº¤äº’æµç•…

---

## å…«ã€å·²çŸ¥é—®é¢˜å’Œæ³¨æ„äº‹é¡¹

### æ³¨æ„äº‹é¡¹

1. **game_gid å¼ºåˆ¶è¦æ±‚**:
   - åç«¯ API éœ€è¦éªŒè¯ `game_gid` å‚æ•°
   - å‰ç«¯å§‹ç»ˆä» URL è¯»å– `game_gid` å¹¶ä¼ é€’ç»™ API
   - å¦‚æœç¼ºå°‘ `game_gid`ï¼ŒAPI è¿”å› 400 é”™è¯¯

2. **è¡¨å•é‡ç½®æ—¶æœº**:
   - æ¨¡æ€æ¡†å…³é—­æ—¶ç«‹å³é‡ç½® `editingCategory`
   - é˜²æ­¢ä¸‹æ¬¡æ‰“å¼€æ—¶æ˜¾ç¤ºæ—§æ•°æ®
   - ä½¿ç”¨ `useEffect` ç›‘å¬ `isOpen` å’Œ `initialData` å˜åŒ–

3. **æˆåŠŸå›è°ƒ**:
   - ä½¿ç”¨ `queryClient.invalidateQueries` åˆ·æ–°åˆ—è¡¨
   - ä¸ç›´æ¥æ“ä½œ `categories` çŠ¶æ€ï¼ˆç”± React Query ç®¡ç†ï¼‰
   - ä¿è¯æ•°æ®ä¸€è‡´æ€§

### æ½œåœ¨æ”¹è¿›

1. **æ€§èƒ½ä¼˜åŒ–**:
   - æ·»åŠ é˜²æŠ–åˆ°æœç´¢è¾“å…¥
   - è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§é‡åˆ†ç±»
   - æ‡’åŠ è½½åˆ†ç±»å¡ç‰‡

2. **ç”¨æˆ·ä½“éªŒ**:
   - æ·»åŠ é”®ç›˜å¿«æ·é”®ï¼ˆESC å…³é—­æ¨¡æ€æ¡†ï¼‰
   - æ·»åŠ æ‹–æ‹½è°ƒæ•´åˆ†ç±»é¡ºåº
   - æ·»åŠ æ‰¹é‡ç¼–è¾‘åŠŸèƒ½

3. **å¯è®¿é—®æ€§**:
   - æ·»åŠ  ARIA æ ‡ç­¾
   - é”®ç›˜å¯¼èˆªæ”¯æŒ
   - å±å¹•é˜…è¯»å™¨å‹å¥½

---

## ä¹ã€ç›¸å…³æ–‡æ¡£

- **è®¾è®¡è§„èŒƒ**: [CLAUDE.md](../../../CLAUDE.md)
- **ç¾å­¦è®¾è®¡ä»¤ç‰Œ**: [frontend/src/styles/design-tokens.css](../../frontend/src/styles/design-tokens.css)
- **å‚è€ƒæ¨¡æ€æ¡†**: [AddGameModal.tsx](../../frontend/src/analytics/components/game-management/AddGameModal.tsx)
- **æ¸¸æˆä¸Šä¸‹æ–‡å®¡æŸ¥æŠ¥å‘Š**: [docs/reports/2026-02-16/game-context-management-audit.md](game-context-management-audit.md)

---

## åã€å®ŒæˆçŠ¶æ€

### âœ… å·²å®Œæˆ

- [x] åˆ›å»º CategoryModal.jsx ç»„ä»¶ï¼ˆ181è¡Œï¼‰
- [x] åˆ›å»º CategoryModal.css æ ·å¼ï¼ˆ290è¡Œï¼‰
- [x] ä¿®æ”¹ CategoriesList.jsx é›†æˆæ–°æ¨¡æ€æ¡†
- [x] ä¿®å¤ç¼–è¾‘æŒ‰é’®ä¼ é€’æ•°æ®é—®é¢˜
- [x] åº”ç”¨ Cyberpunk Data Terminal ç¾å­¦è®¾è®¡
- [x] å®ç°æ¨¡å¼åˆ‡æ¢é€»è¾‘ï¼ˆinitialData propï¼‰
- [x] å®ç°è¡¨å•éªŒè¯
- [x] å®ç° API è°ƒç”¨ï¼ˆPOST/PUTï¼‰
- [x] å®ç°æˆåŠŸ/é”™è¯¯å¤„ç†
- [x] å®ç°å“åº”å¼è®¾è®¡

### ğŸ”² å¾…ç”¨æˆ·æµ‹è¯•

- [ ] åŠŸèƒ½æµ‹è¯•ï¼ˆæ–°å¢ã€ç¼–è¾‘ã€éªŒè¯ã€å–æ¶ˆï¼‰
- [ ] è§†è§‰æµ‹è¯•ï¼ˆç½‘æ ¼èƒŒæ™¯ã€Cyan å…‰æ™•ã€åŠ¨ç”»ï¼‰
- [ ] è¾¹ç•Œæµ‹è¯•ï¼ˆæ—  game_gidã€ç½‘ç»œé”™è¯¯ã€å¹¶å‘ï¼‰
- [ ] API å¥‘çº¦æµ‹è¯•ï¼ˆè¯·æ±‚/å“åº”æ ¼å¼ï¼‰
- [ ] å“åº”å¼æµ‹è¯•ï¼ˆç§»åŠ¨ç«¯å¸ƒå±€ï¼‰

### ğŸ“‹ åç»­ä»»åŠ¡

1. **P0 å®‰å…¨é—®é¢˜ä¿®å¤**:
   - [ ] CommonParamsList.jsx - æ·»åŠ  game_gid URL å‚æ•°
   - [ ] FlowsList.jsx - æ·»åŠ  game_gid URL å‚æ•°
   - [ ] æ›´æ–° Sidebar.jsx routesRequiringGameContext é…ç½®

2. **æ–‡æ¡£æ›´æ–°**:
   - [ ] æ›´æ–° CLAUDE.md åˆ†ç±»ç®¡ç†ç« èŠ‚
   - [ ] æ·»åŠ ç»„ä»¶æ–‡æ¡£åˆ° docs/development/

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2026-02-16 20:00
**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**: ç”¨æˆ·è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ï¼Œæˆ–ç»§ç»­ä¿®å¤ P0 å®‰å…¨é—®é¢˜
