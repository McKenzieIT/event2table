# 完整端到端测试计划

**日期**: 2026-02-16
**目标**: 对 Event2Table 项目所有核心功能进行完整的 E2E 测试
**工具**: Chrome DevTools MCP
**要求**: 每个页面的每个按钮都需要测试，不允许减少测试范围

---

## 一、测试范围

### 1. 分类管理页面 (`/categories?game_gid=10000147`)

#### 1.1 页面加载测试
- [ ] 页面正常加载
- [ ] 显示分类卡片列表
- [ ] 显示分类总数统计

#### 1.2 新建分类功能
- [ ] 点击"新建分类"按钮
- [ ] 模态框正确打开
- [ ] 模态框标题显示"新增分类"
- [ ] 显示绿色徽章"➕ 新增模式"
- [ ] 表单字段为空
- [ ] 填写分类名称
- [ ] 填写分类描述
- [ ] 点击"创建分类"按钮
- [ ] 成功提示显示
- [ ] 模态框关闭
- [ ] 新分类出现在列表中

#### 1.3 编辑分类功能
- [ ] 选择一个分类
- [ ] 点击"编辑"按钮
- [ ] 模态框正确打开
- [ ] 模态框标题显示"编辑分类"
- [ ] 显示青色徽章"✎ 编辑模式"
- [ ] 表单字段预填充正确
- [ ] 修改分类名称
- [ ] 修改分类描述
- [ ] 点击"保存修改"按钮
- [ ] 成功提示显示
- [ ] 模态框关闭
- [ ] 修改后的分类信息更新

#### 1.4 删除分类功能
- [ ] 选择一个分类
- [ ] 点击"删除"按钮
- [ ] 确认对话框正确显示
- [ ] 确认删除
- [ ] 成功提示显示
- [ ] 分类从列表中移除

#### 1.5 搜索功能
- [ ] 在搜索框输入关键词
- [ ] 列表正确过滤
- [ ] 清空搜索框
- [ ] 列表恢复显示所有分类

#### 1.6 批量操作功能
- [ ] 选择多个分类（复选框）
- [ ] 显示批量操作栏
- [ ] 显示已选择数量
- [ ] 点击"批量删除"按钮
- [ ] 确认对话框正确显示
- [ ] 确认批量删除
- [ ] 成功提示显示
- [ ] 所有选中的分类被删除
- [ ] 点击"取消选择"按钮
- [ ] 批量操作栏消失

#### 1.7 表单验证
- [ ] 新建分类时不填写名称
- [ ] 点击"创建分类"
- [ ] 显示错误提示"分类名称不能为空"
- [ ] 模态框保持打开

#### 1.8 视觉测试
- [ ] 网格背景正确显示
- [ ] Cyan 光晕边框可见
- [ ] 滑入动画流畅
- [ ] 响应式布局正确

### 2. 公参管理页面 (`/common-params?game_gid=10000147`)

#### 2.1 页面加载测试
- [ ] 页面正常加载
- [ ] 显示公参卡片列表
- [ ] 显示公参总数统计
- [ ] game_gid 参数正确传递

#### 2.2 同步公参功能
- [ ] 点击"同步公共参数"按钮
- [ ] 确认对话框正确显示
- [ ] 确认同步
- [ ] 同步进行中（按钮状态变化）
- [ ] 成功提示显示同步结果
- [ ] 列表刷新

#### 2.3 新建公参功能
- [ ] 点击"新建公参"按钮
- [ ] 导航到创建页面
- [ ] URL 包含 game_gid 参数

#### 2.4 编辑公参功能
- [ ] 选择一个公参
- [ ] 点击"编辑"按钮
- [ ] 导航到编辑页面
- [ ] URL 包含 game_gid 参数

#### 2.5 删除公参功能
- [ ] 选择一个公参
- [ ] 点击"删除"按钮
- [ ] 确认对话框正确显示
- [ ] 确认删除
- [ ] 成功提示显示
- [ ] 公参从列表中移除

#### 2.6 搜索功能
- [ ] 在搜索框输入关键词
- [ ] 列表正确过滤（名称、键名、类型）
- [ ] 清空搜索框
- [ ] 列表恢复显示所有公参

#### 2.7 批量操作功能
- [ ] 选择多个公参
- [ ] 显示批量操作栏
- [ ] 显示已选择数量
- [ ] 点击"批量删除"
- [ ] 确认对话框正确显示
- [ ] 确认批量删除
- [ ] 成功提示显示
- [ ] 所有选中的公参被删除

#### 2.8 game_gid 缺失测试
- [ ] 访问 `/common-params`（不带 game_gid）
- [ ] 显示错误提示"请先选择游戏"
- [ ] 提供"返回首页选择游戏"按钮

### 3. 流程管理页面 (`/flows?game_gid=10000147`)

#### 3.1 页面加载测试
- [ ] 页面正常加载
- [ ] 显示流程列表
- [ ] game_gid 参数正确传递

#### 3.2 新建流程功能
- [ ] 点击"新建流程"按钮
- [ ] 导航到创建页面
- [ ] URL 包含 game_gid 参数

#### 3.3 编辑流程功能
- [ ] 选择一个流程
- [ ] 点击"编辑"按钮
- [ ] 导航到编辑页面
- [ ] URL 包含 game_gid 参数

#### 3.4 删除流程功能
- [ ] 选择一个流程
- [ ] 点击"删除"按钮
- [ ] 确认对话框正确显示
- [ ] 确认删除
- [ ] 成功提示显示
- [ ] 流程从列表中移除

#### 3.5 搜索功能
- [ ] 在搜索框输入关键词
- [ ] 列表正确过滤
- [ ] 清空搜索框
- [ ] 列表恢复显示所有流程

#### 3.6 game_gid 缺失测试
- [ ] 访问 `/flows`（不带 game_gid）
- [ ] 显示错误提示"请先选择游戏"
- [ ] 提供"返回首页选择游戏"按钮

### 4. 游戏管理相关功能

#### 4.1 首页游戏选择
- [ ] 访问首页
- [ ] 显示游戏列表
- [ ] 选择一个游戏
- [ ] 所有页面导航自动包含 game_gid

#### 4.2 Sidebar 导航
- [ ] 所有菜单项可点击
- [ ] 点击时自动添加 game_gid 参数
- [ ] 游戏上下文保持

### 5. 事件管理页面 (`/events?game_gid=10000147`)

#### 5.1 页面加载测试
- [ ] 页面正常加载
- [ ] 显示事件列表
- [ ] game_gid 参数正确传递

#### 5.2 事件创建功能
- [ ] 点击"新建事件"按钮
- [ ] 表单正确打开
- [ ] 填写事件信息
- [ ] 保存成功
- [ ] 新事件出现在列表中

#### 5.3 事件编辑功能
- [ ] 选择一个事件
- [ ] 点击"编辑"
- [ ] 表单预填充正确
- [ ] 修改并保存
- [ ] 更新成功

#### 5.4 事件删除功能
- [ ] 选择一个事件
- [ ] 点击"删除"
- [ ] 确认删除
- [ ] 删除成功

### 6. 参数管理页面 (`/parameters?game_gid=10000147`)

#### 6.1 页面加载测试
- [ ] 页面正常加载
- [ ] 显示参数列表
- [ ] game_gid 参数正确传递

#### 6.2 参数搜索和过滤
- [ ] 搜索功能正常
- [ ] 过滤功能正常

### 7. Canvas 页面 (`/canvas?game_gid=10000147`)

#### 7.1 页面加载测试
- [ ] Canvas 页面正常加载
- [ ] 显示画布区域
- [ ] 显示节点侧边栏
- [ ] game_gid 参数正确传递

#### 7.2 节点操作
- [ ] 拖拽节点到画布
- [ ] 连接节点
- [ ] 删除节点
- [ ] 保存流程

---

## 二、测试执行顺序

1. **准备阶段**
   - 启动后端服务器
   - 启动前端开发服务器
   - 确认服务器运行正常

2. **核心页面测试**（按优先级）
   - 分类管理（新建 + 编辑功能）
   - 公参管理（同步功能）
   - 流程管理
   - 游戏管理
   - 事件管理
   - 参数管理
   - Canvas 页面

3. **回归测试**
   - 重新测试修复的问题
   - 确认无副作用

---

## 三、测试记录格式

每个测试用例需要记录：

```markdown
### [测试用例名称]

**测试步骤**:
1. 访问页面 URL
2. 执行操作
3. 观察结果

**预期结果**:
- 步骤 1: ...
- 步骤 2: ...
- 步骤 3: ...

**实际结果**:
- 步骤 1: ✅ / ❌ [描述]
- 步骤 2: ✅ / ❌ [描述]
- 步骤 3: ✅ / ❌ [描述]

**截图**: [相关截图]

**问题记录**: [如果有问题]
```

---

## 四、测试环境

- **前端**: http://localhost:5173
- **后端**: http://127.0.0.1:5001
- **测试游戏**: STAR001 (GID: 10000147)
- **浏览器**: Chrome (via Chrome DevTools MCP)

---

## 五、成功标准

- ✅ 所有 P0 功能测试通过
- ✅ 所有 P1 功能测试通过
- ✅ 发现的所有问题已记录
- ✅ 生成的测试报告完整

---

**测试开始时间**: [待记录]
**测试完成时间**: [待记录]
**测试执行人**: Claude Code (via Chrome DevTools MCP)
