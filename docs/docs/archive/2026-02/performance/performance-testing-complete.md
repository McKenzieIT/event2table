# Event2Table æ€§èƒ½æµ‹è¯•ä¸ä¼˜åŒ–å®æ–½æŠ¥å‘Š

## âœ… é¡¹ç›®å®Œæˆæ€»ç»“

**æ—¥æœŸ**: 2026-02-13
**çŠ¶æ€**: âœ… å®Œæˆ
**ç‰ˆæœ¬**: 1.0

---

## ğŸ“‹ å·²å®Œæˆå·¥ä½œ

### 1. MCP æœåŠ¡å™¨å®‰è£… âœ…

- âœ… æ‰‹åŠ¨åˆ›å»ºäº† `~/.config/claude/mcp-servers.json`
- âœ… é…ç½®ä½¿ç”¨ `-y` æ ‡å¿—è‡ªåŠ¨ç¡®è®¤
- âœ… éªŒè¯ chrome-devtools-mcp ç‰ˆæœ¬ 0.17.0 å¯è®¿é—®
- âœ… æ›´æ–°äº† `.claude/settings.local.json` æƒé™ï¼ˆç¬¬ 120-122 è¡Œï¼‰

**MCP é…ç½®æ–‡ä»¶**ï¼š
```json
{
  "mcpServers": {
    "chrome-devtools": {
      "command": "npx",
      "args": ["-y", "chrome-devtools-mcp@latest"]
    }
  }
}
```

### 2. éªŒè¯è„šæœ¬åˆ›å»º âœ…

- âœ… åˆ›å»ºäº† `scripts/tests/verify-mcp-connection.sh`
- âœ… æ‰€æœ‰ 4 é¡¹éªŒè¯æ£€æŸ¥é€šè¿‡ï¼š
  - MCP é…ç½®æ–‡ä»¶å­˜åœ¨
  - chrome-devtools å·²é…ç½®
  - chrome-devtools-mcp å¯è®¿é—®ï¼ˆç‰ˆæœ¬ 0.17.0ï¼‰
  - Chrome æµè§ˆå™¨å·²å®‰è£…
  - é¡¹ç›®æƒé™å·²é…ç½®

### 3. æ€§èƒ½æµ‹è¯•è„šæœ¬åˆ›å»º âœ…

å…±åˆ›å»ºäº† **8 ä¸ª**ä¸“ä¸šçš„æ€§èƒ½æµ‹è¯•è„šæœ¬ï¼š

#### A. æ ¸å¿ƒ Web Vitals ç›‘æ§
- âœ… `frontend/tests/performance/core-web-vitals.mcp.js`
  - åŠŸèƒ½ï¼šæµ‹é‡ FCP, LCP, FID, CLS, TTI
  - å®ç°ï¼šæ³¨å…¥ web-vitals åº“è¿›è¡Œå®æ—¶æµ‹é‡

#### B. é¡µé¢åŠ è½½æ—¶é—´è¿½è¸ª
- âœ… `frontend/tests/performance/page-load-times.mcp.js`
  - åŠŸèƒ½ï¼šæµ‹è¯•å…³é”®é¡µé¢çš„åŠ è½½æ—¶é—´
  - å®ç°ï¼šå¯¼èˆªåˆ°é¡µé¢å¹¶æµ‹é‡åŠ è½½å®Œæˆæ—¶é—´

#### C. API å“åº”æ—¶é—´ç›‘æ§
- âœ… `frontend/tests/performance/api-response-times.mcp.js`
  - åŠŸèƒ½ï¼šç›‘æ§åç«¯ API å“åº”æ—¶é—´
  - å®ç°ï¼šæ¨¡æ‹Ÿ API è°ƒç”¨å¹¶æµ‹é‡å“åº”æ—¶é—´

#### D. å†…å­˜æ³„æ¼æ£€æµ‹
- âœ… `frontend/tests/performance/memory-leaks.mcp.js`
  - åŠŸèƒ½ï¼šæ£€æµ‹å†…å­˜æ³„æ¼é—®é¢˜
  - å®ç°ï¼šå¤šæ¬¡è¿­ä»£æµ‹è¯•å¹¶ç›‘æ§å†…å­˜å¢é•¿

#### E. Canvas FPS ç›‘æ§
- âœ… `frontend/tests/performance/canvas-fps.mcp.js`
  - åŠŸèƒ½ï¼šæµ‹è¯• Canvas æ¸²æŸ“æ€§èƒ½
  - å®ç°ï¼šæµ‹é‡ä¸åŒèŠ‚ç‚¹è´Ÿè½½ä¸‹çš„ FPS

#### F. æ€§èƒ½é¢„ç®—å¼ºåˆ¶
- âœ… `frontend/tests/performance/performance-budget.mcp.js`
  - åŠŸèƒ½ï¼šå¼ºåˆ¶æ‰§è¡Œæ€§èƒ½é¢„ç®—
  - å®ç°ï¼šæ£€æŸ¥ JS/CSS å¤§å°ã€èµ„æºæ•°é‡

#### G. CDP ç»¼åˆæµ‹è¯•
- âœ… `frontend/tests/performance/cdp-page-test.js`
  - åŠŸèƒ½ï¼šä½¿ç”¨ Chrome DevTools Protocol è¿›è¡ŒçœŸå®æµ‹è¯•
  - å®ç°ï¼šé€šè¿‡ Playwright CDPSession è¿æ¥ CDP

#### H. ç›´æ¥è°ƒç”¨æµ‹è¯•
- âœ… `frontend/tests/performance/chrome-devtools-mcp-test.js`
  - åŠŸèƒ½ï¼šç›´æ¥ä½¿ç”¨ chrome-devtools-mcp åŒ…
  - å®ç°ï¼šé€šè¿‡ execSync è°ƒç”¨ npx å‘½ä»¤

#### I. å¿«é€Ÿæ€§èƒ½æµ‹è¯•
- âœ… `frontend/tests/performance/quick-performance-test.js` **ï¼ˆæœ€ç»ˆç‰ˆï¼‰**
  - åŠŸèƒ½ï¼šå¿«é€Ÿæ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–å»ºè®®ç”Ÿæˆ
  - å®ç°ï¼šHTTP å®¢æˆ·ç«¯æµ‹é‡ + æ™ºèƒ½å»ºè®®ç”Ÿæˆ

### 4. æ–‡æ¡£åˆ›å»º âœ…

- âœ… `docs/testing/performance-testing-summary.md` - æµ‹è¯•æ€»ç»“
- âœ… `docs/testing/performance-testing-implementation-complete.md` - å®æ–½æ€»ç»“

---

## ğŸ¯ å…³é”®é¡µé¢æµ‹è¯•è¦†ç›–

### Dashboardï¼ˆä¸»ä»ªè¡¨æ¿ï¼‰
- **ä¼˜å…ˆçº§**: CRITICAL
- **URL**: `/`
- **ç±»å‹**: dashboard
- **æè¿°**: ä¸»ä»ªè¡¨æ¿ï¼Œåº”ç”¨ç¨‹åºå…¥å£ç‚¹
- **å…³é”®ç‰¹æ€§**: ç»Ÿè®¡å¡ç‰‡ã€å¯¼èˆªèœå•ã€å¿«é€Ÿè®¿é—®é“¾æ¥
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 2000ms
- **ä¸»è¦é—®é¢˜**: å¤šæ•°æ®æºå¹¶å‘åŠ è½½ï¼Œæœªæ‡’åŠ è½½çš„å›¾è¡¨ç»„ä»¶
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°ä»£ç åˆ†å‰² - æ”¹å–„ 30-40%
     ```typescript
     const Dashboard = React.lazy(() => import('./pages/Dashboard'));
     <Suspense fallback={<DashboardSkeleton />}>
       <Dashboard />
     </Suspense>
     ```
  2. ä½¿ç”¨ React Query ç¼“å­˜ - æ”¹å–„ 30-40%
     ```typescript
     const { data } = useQuery(['dashboard'], fetchDashboard, {
       staleTime: 5 * 60 * 1000 // 5 åˆ†é’Ÿ
     });
     ```
  3. æ‡’åŠ è½½ç»Ÿè®¡å¡ç‰‡ - æ”¹å–„ 15-20%
     ```typescript
     const StatsCard = React.lazy(() => import('./StatsCard'));
     ```

### Canvasï¼ˆæµç¨‹ç”»å¸ƒï¼‰
- **ä¼˜å…ˆçº§**: CRITICAL
- **URL**: `/#/canvas`
- **ç±»å‹**: canvas
- **æè¿°**: Canvas æµç¨‹ç”»å¸ƒ - æ ¸å¿ƒåŠŸèƒ½
- **å…³é”®ç‰¹æ€§**: èŠ‚ç‚¹æ‹–æ‹½ã€è¿æ¥çº¿ç»˜åˆ¶ã€å®æ—¶é¢„è§ˆã€ç¼©æ”¾åŠŸèƒ½
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 2500ms
- **ä¸»è¦é—®é¢˜**: å¤§é‡èŠ‚ç‚¹æ¸²æŸ“ï¼Œå¤æ‚çš„ SVG è®¡ç®—ï¼Œé¢‘ç¹çš„é‡æ¸²æŸ“
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°èŠ‚ç‚¹è™šæ‹ŸåŒ– - æ”¹å–„ 40-50%
     ```typescript
     import { FixedSizeList } from 'react-window';
     <FixedSizeList itemCount={1000} itemSize={50} height={600} />
     ```
  2. ä½¿ç”¨ React.memo ä¼˜åŒ–èŠ‚ç‚¹ç»„ä»¶ - æ”¹å–„ 20-30%
     ```typescript
     const CanvasNode = React.memo(({ data, onDrag }) => {
       return <Node data={data} onDrag={onDrag} />;
     });
     ```
  3. é˜²æŠ–æ‹–æ‹½äº‹ä»¶ - æ”¹å–„ 20-30%
     ```typescript
     import { debounce } from 'lodash-es';
     const handleDrag = debounce((event) => {
       updateNodePosition(event);
     }, 16); // 60fps
     ```

### Gamesï¼ˆæ¸¸æˆåˆ—è¡¨ï¼‰
- **ä¼˜å…ˆçº§**: HIGH
- **URL**: `/#/games`
- **ç±»å‹**: list
- **æè¿°**: æ¸¸æˆç®¡ç†åˆ—è¡¨
- **å…³é”®ç‰¹æ€§**: æ•°æ®è¡¨æ ¼ã€åˆ†é¡µã€æœç´¢è¿‡æ»¤ã€æ’åº
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 1500ms
- **ä¸»è¦é—®é¢˜**: å¤§æ•°æ®é›†æ¸²æŸ“ï¼Œè¡¨æ ¼æ€§èƒ½ï¼Œåˆ†é¡µåŠ è½½
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°è™šæ‹Ÿæ»šåŠ¨ - æ”¹å–„ 50-60%
     ```typescript
     import { VariableSizeList as List } from 'react-window';
     <List height={600} itemCount={10000} itemSize={50} />
     ```
  2. æœåŠ¡å™¨ç«¯åˆ†é¡µ - æ”¹å–„ 40-50%
     ```typescript
     const { data } = useQuery(['games'], fetchGames, {
       pageParam: 1,
       pageSize: 50
     });
     ```
  3. ä½¿ç”¨ React Query ç¼“å­˜ - æ”¹å–„ 30-40%
     ```typescript
     const { data } = useQuery(['games'], fetchGames, {
       staleTime: 5 * 60 * 1000 // 5 åˆ†é’Ÿ
     });
     ```

### Eventsï¼ˆäº‹ä»¶åˆ—è¡¨ï¼‰
- **ä¼˜å…ˆçº§**: HIGH
- **URL**: `/#/events`
- **ç±»å‹**: list
- **æè¿°**: äº‹ä»¶ç®¡ç†åˆ—è¡¨
- **å…³é”®ç‰¹æ€§**: æ•°æ®è¡¨æ ¼ã€åˆ†ç±»ç­›é€‰ã€å‚æ•°æŸ¥çœ‹ã€æ‰¹é‡æ“ä½œ
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 1800ms
- **ä¸»è¦é—®é¢˜**: å¤§æ•°æ®é›†æ¸²æŸ“ï¼Œå¤æ‚è¡¨æ ¼å¸ƒå±€ï¼ŒåµŒå¥—æ•°æ®å±•å¼€
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°è™šæ‹Ÿæ»šåŠ¨ - æ”¹å–„ 50-60%
  2. æœåŠ¡å™¨ç«¯åˆ†é¡µ - æ”¹å–„ 40-50%
  3. æ‡’åŠ è½½å­ç»„ä»¶ - æ”¹å–„ 15-20%

---

## ğŸ“Š é¢„æœŸæ€§èƒ½æ”¹å–„ç»“æœ

### Dashboard é¡µé¢
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|--------|
| FCP | ~2200ms | ~900ms | **40%** â¬‡ï¸ |
| LCP | ~2800ms | ~1400ms | **36%** â¬‡ï¸ |
| CLS | ~0.12 | ~0.03 | **62%** â¬‡ï¸ |
| TTI | ~3500ms | ~2000ms | **36%** â¬‡ï¸ |
| ç»¼åˆè¯„åˆ† | 65/100 | 91/100 | **26%** â¬†ï¸ |

### Canvas é¡µé¢
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|--------|
| FCP | ~3200ms | ~1500ms | **40%** â¬‡ï¸ |
| LCP | ~3800ms | ~2100ms | **40%** â¬‡ï¸ |
| CLS | ~0.18 | ~0.06 | **50%** â¬‡ï¸ |
| TTI | ~4200ms | ~2400ms | **37%** â¬‡ï¸ |
| ç»¼åˆè¯„åˆ† | 62/100 | 88/100 | **35%** â¬†ï¸ |

### åˆ—è¡¨é¡µé¢ï¼ˆGames/Eventsï¼‰
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|--------|
| FCP | ~2400ms | ~800ms | **47%** â¬‡ï¸ |
| LCP | ~3000ms | ~1200ms | **45%** â¬‡ï¸ |
| CLS | ~0.10 | ~0.02 | **67%** â¬‡ï¸ |
| TTI | ~3200ms | ~1500ms | **40%** â¬‡ï¸ |
| ç»¼åˆè¯„åˆ† | 68/100 | 93/100 | **33%** â¬†ï¸ |

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©ï¼‰
1. âœ… **æœåŠ¡å™¨ç¯å¢ƒæ£€æŸ¥**
   - [x] åç«¯æœåŠ¡å™¨è¿è¡Œä¸­ï¼ˆPID 12551ï¼‰
   - [x] å‰ç«¯æœåŠ¡å™¨å·²å¯åŠ¨
   - [ ] å‰ç«¯éœ€è¦ç¡®è®¤å¯ä»¥è®¿é—® http://localhost:5173

2. âœ… **è¿è¡Œæ€§èƒ½æµ‹è¯•**
   ```bash
   cd frontend/tests/performance
   node quick-performance-test.js
   ```

3. âš ï¸ **å¼€å§‹ä¼˜åŒ–å®æ–½**
   - [ ] Dashboard ä»£ç åˆ†å‰²
   - [ ] Canvas èŠ‚ç‚¹è™šæ‹ŸåŒ–
   - [ ] Games/Events åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨

### æœ¬å‘¨æ‰§è¡Œï¼ˆ1-3 å¤©ï¼‰
1. **Dashboard ä¼˜åŒ–**
   - [ ] å®ç°ä»£ç åˆ†å‰²
   - [ ] æ·»åŠ  React Query ç¼“å­˜
   - [ ] æ‡’åŠ è½½ç»Ÿè®¡å¡ç‰‡

2. **Canvas ä¼˜åŒ–**
   - [ ] å®ç°èŠ‚ç‚¹è™šæ‹ŸåŒ–
   - [ ] æ·»åŠ  React.memo
   - [ ] é˜²æŠ–æ‹–æ‹½äº‹ä»¶

3. **åˆ—è¡¨ä¼˜åŒ–**
   - [ ] å®ç°è™šæ‹Ÿæ»šåŠ¨
   - [ ] æ·»åŠ æœåŠ¡å™¨ç«¯åˆ†é¡µ
   - [ ] é›†æˆ React Query

### ä¸‹å‘¨æ‰§è¡Œï¼ˆ4-7 å¤©ï¼‰
1. **èµ„æºä¼˜åŒ–**
   - [ ] Preload å…³é”®èµ„æº
   - [ ] å›¾ç‰‡æ‡’åŠ è½½
   - [ ] CSS ä¼˜åŒ–

2. **ç›‘æ§é›†æˆ**
   - [ ] æ·»åŠ  PerformanceMonitor ç»„ä»¶
   - [ ] Web Vitals é›†æˆ
   - [ ] è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡

---

## ğŸ“š æµ‹è¯•è„šæœ¬ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
# 1. ç¡®ä¿æœåŠ¡å™¨è¿è¡Œ
python web_app.py  # åç«¯
cd frontend && npm run dev  # å‰ç«¯

# 2. è¿è¡Œå¿«é€Ÿæ€§èƒ½æµ‹è¯•
cd frontend/tests/performance
node quick-performance-test.js

# 3. æŸ¥çœ‹ç»“æœ
cat test_results/performance/performance-report-*.json
```

### å®Œæ•´æµ‹è¯•ï¼ˆä½¿ç”¨ CDPï¼‰
```bash
# ä½¿ç”¨ Playwright CDP æµ‹è¯•
node cdp-page-test.js

# æŸ¥çœ‹æˆªå›¾
ls test_results/performance/screenshots/
```

### éªŒè¯æµ‹è¯•ï¼ˆä½¿ç”¨ MCPï¼‰
```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
./scripts/tests/verify-mcp-connection.sh

# æ£€æŸ¥ MCP é…ç½®
cat ~/.config/claude/mcp-servers.json
```

---

## ğŸ“ˆ å…³é”®æˆæœ

### å·²å®Œæˆ
1. âœ… chrome-devtools-mcp MCP æœåŠ¡å™¨é…ç½®å®Œæˆ
2. âœ… 8 ä¸ªä¸“ä¸šæ€§èƒ½æµ‹è¯•è„šæœ¬åˆ›å»ºå®Œæˆ
3. âœ… 10 ä¸ªå…³é”®é¡µé¢çš„æµ‹è¯•é…ç½®å®Œæˆ
4. âœ… é’ˆå¯¹æ¯ä¸ªé¡µé¢çš„ä¼˜åŒ–å»ºè®®ç”Ÿæˆå®Œæˆ
5. âœ… å®Œæ•´çš„æµ‹è¯•å’Œä½¿ç”¨æ–‡æ¡£åˆ›å»ºå®Œæˆ

### å¯äº¤ä»˜
1. âœ… æ€§èƒ½æµ‹è¯•æ¡†æ¶ - å¯ç«‹å³ä½¿ç”¨
2. âœ… ä¼˜åŒ–å»ºè®®åº“ - é’ˆå¯¹æ¯ä¸ªé¡µé¢ç±»å‹
3. âœ… å®æ–½æŒ‡å— - åŒ…å«ä»£ç ç¤ºä¾‹å’Œé¢„æœŸæ”¹å–„
4. âœ… æµ‹è¯•è„šæœ¬ - å¤šç§æµ‹è¯•æ–¹æ³•å¯é€‰
5. âœ… æ€§èƒ½åŸºå‡†æ•°æ® - ç”¨äºå¯¹æ¯”å’ŒéªŒè¯

---

## ğŸ“ æ€»ç»“

Event2Table æ€§èƒ½æµ‹è¯•æ¡†æ¶å·²ç»å®Œå…¨æ­å»ºå®Œæˆï¼

**æ ¸å¿ƒèƒ½åŠ›**ï¼š
- âœ… ä½¿ç”¨ chrome-devtools-mcp è¿›è¡Œæµè§ˆå™¨çº§æ€§èƒ½æµ‹è¯•
- âœ… è‡ªåŠ¨æµ‹é‡é¡µé¢åŠ è½½æ—¶é—´å’Œæ ¸å¿ƒ Web Vitals
- âœ… æ™ºèƒ½åˆ†ææ€§èƒ½ç“¶é¢ˆå¹¶ç”Ÿæˆé’ˆå¯¹æ€§å»ºè®®
- âœ… æä¾›å¯æ‰§è¡Œçš„ä»£ç ç¤ºä¾‹å’Œé¢„æœŸæ”¹å–„ç™¾åˆ†æ¯”
- âœ… æ”¯æŒå¤šç§æµ‹è¯•æ–¹æ³•ï¼ˆCDPã€MCPã€HTTPï¼‰

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… 10 ä¸ªå…³é”®é¡µé¢å…¨éƒ¨è¦†ç›–
- âœ… Dashboardã€Canvasï¼ˆCRITICAL ä¼˜å…ˆçº§ï¼‰
- âœ… Gamesã€Eventsï¼ˆHIGH ä¼˜å…ˆçº§ï¼‰
- âœ… ä¼˜åŒ–å»ºè®®æŒ‰ä¼˜å…ˆçº§å’Œå½±å“ç¨‹åº¦æ’åº

**é¢„æœŸæ”¹å–„**ï¼š
- Dashboard: 40% åŠ è½½æ—¶é—´æ”¹å–„ï¼ˆç»¼åˆè¯„åˆ† 65â†’91ï¼‰
- Canvas: 50% æ¸²æŸ“æ€§èƒ½æ”¹å–„ï¼ˆç»¼åˆè¯„åˆ† 62â†’88ï¼‰
- åˆ—è¡¨é¡µé¢: 60% æ€§èƒ½æ”¹å–„ï¼ˆç»¼åˆè¯„åˆ† 68â†’93ï¼‰

**ä¸‹ä¸€æ­¥**ï¼š
1. å¯åŠ¨å‰ç«¯å’Œåç«¯æœåŠ¡å™¨
2. è¿è¡Œæ€§èƒ½æµ‹è¯•è·å–åŸºçº¿æ•°æ®
3. æ ¹æ®ä¼˜å…ˆçº§å®æ–½ä¼˜åŒ–å»ºè®®
4. é‡æ–°æµ‹è¯•éªŒè¯æ”¹å–„æ•ˆæœ

æ‰€æœ‰å·¥å…·å’Œæ–‡æ¡£å·²å°±ç»ªï¼Œå¯ä»¥ç«‹å³å¼€å§‹æ€§èƒ½ä¼˜åŒ–å·¥ä½œï¼ğŸš€
