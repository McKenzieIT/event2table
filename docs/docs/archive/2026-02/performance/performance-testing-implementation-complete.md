# Event2Table æ€§èƒ½æµ‹è¯•å®æ–½å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. MCP æœåŠ¡å™¨å®‰è£… âœ…

**æ‰‹åŠ¨é…ç½®**ï¼š
- âœ… åˆ›å»ºäº† `~/.config/claude/mcp-servers.json`
- âœ… é…ç½®ä½¿ç”¨ `-y` æ ‡å¿—è‡ªåŠ¨ç¡®è®¤
- âœ… éªŒè¯ chrome-devtools-mcp ç‰ˆæœ¬ 0.17.0 å¯è®¿é—®

**é…ç½®å†…å®¹**ï¼š
```json
{
  "mcpServers": {
    "chrome-devtools": {
      "command": "npx",
      "args": ["-y", "chrome-devtools-mcp@latest"]
    }
  }
}
```

### 2. éªŒè¯è„šæœ¬åˆ›å»º âœ…

**æ–‡ä»¶**: `scripts/tests/verify-mcp-connection.sh`

**éªŒè¯é¡¹ç›®**ï¼š
- âœ… MCP é…ç½®æ–‡ä»¶å­˜åœ¨
- âœ… chrome-devtools å·²é…ç½®
- âœ… chrome-devtools-mcp å¯è®¿é—®ï¼ˆç‰ˆæœ¬ 0.17.0ï¼‰
- âœ… Chrome æµè§ˆå™¨å·²å®‰è£…
- âœ… é¡¹ç›®æƒé™å·²é…ç½®ï¼ˆ`.claude/settings.local.json` ç¬¬ 120 è¡Œï¼‰

**è¿è¡Œç»“æœ**ï¼šæ‰€æœ‰ 4 é¡¹æ£€æŸ¥é€šè¿‡ âœ…

### 3. æ€§èƒ½æµ‹è¯•è„šæœ¬åˆ›å»º âœ…

#### A. æ ¸å¿ƒ Web Vitals ç›‘æ§
**æ–‡ä»¶**: `frontend/tests/performance/core-web-vitals.mcp.js`

**åŠŸèƒ½**ï¼š
- âœ… æµ‹é‡ FCP (First Contentful Paint)
- âœ… æµ‹é‡ LCP (Largest Contentful Paint)
- âœ… æµ‹é‡ FID (First Input Delay)
- âœ… æµ‹é‡ CLS (Cumulative Layout Shift)
- âœ… æµ‹é‡ TTI (Time to Interactive)
- âœ… æ³¨å…¥ web-vitals åº“è¿›è¡Œå®æ—¶æµ‹é‡

#### B. é¡µé¢åŠ è½½æ—¶é—´è¿½è¸ª
**æ–‡ä»¶**: `frontend/tests/performance/page-load-times.mcp.js`

**æµ‹è¯•é¡µé¢**ï¼š
- Dashboard (< 2s ç›®æ ‡)
- Games (< 1.5s ç›®æ ‡)
- Events (< 2s ç›®æ ‡)
- Canvas (< 2.5s ç›®æ ‡)

#### C. API å“åº”æ—¶é—´ç›‘æ§
**æ–‡ä»¶**: `frontend/tests/performance/api-response-times.mcp.js`

**æµ‹è¯•ç«¯ç‚¹**ï¼š
- `/api/games` (< 200ms ç›®æ ‡)
- `/api/events?page=1&limit=50` (< 200ms ç›®æ ‡)
- `/api/categories` (< 100ms ç›®æ ‡)
- `/api/parameters/all?game_gid=10000147` (< 300ms ç›®æ ‡)

#### D. å†…å­˜æ³„æ¼æ£€æµ‹
**æ–‡ä»¶**: `frontend/tests/performance/memory-leaks.mcp.js`

**æ£€æµ‹é€»è¾‘**ï¼š
- 5 æ¬¡è¿­ä»£æµ‹è¯•
- æ€»å†…å­˜å¢é•¿ < 50MB
- å¹³å‡å¢é•¿/è¿­ä»£ < 5MB

#### E. Canvas FPS ç›‘æ§
**æ–‡ä»¶**: `frontend/tests/performance/canvas-fps.mcp.js`

**æµ‹è¯•åœºæ™¯**ï¼š
- 10 ä¸ªèŠ‚ç‚¹ (â‰¥ 55 FPS)
- 50 ä¸ªèŠ‚ç‚¹ (â‰¥ 55 FPS)
- 100 ä¸ªèŠ‚ç‚¹ (â‰¥ 55 FPS)

#### F. æ€§èƒ½é¢„ç®—å¼ºåˆ¶
**æ–‡ä»¶**: `frontend/tests/performance/performance-budget.mcp.js`

**é¢„ç®—é™åˆ¶**ï¼š
- æ€» JS: 500 KB
- æ€» CSS: 100 KB
- ä¸»åŒ…: 300 KB
- æ€»è¯·æ±‚æ•°: 50 ä¸ª

#### G. Chrome DevTools Protocol çœŸå®æµ‹è¯•
**æ–‡ä»¶**: `frontend/tests/performance/cdp-page-test.js`

**ç‰¹ç‚¹**ï¼š
- âœ… ä½¿ç”¨ Playwright CDPSession ç›´æ¥è¿æ¥ Chrome DevTools Protocol
- âœ… æµ‹è¯• 10 ä¸ªå…³é”®é¡µé¢
- âœ… æµ‹é‡å®é™…æµè§ˆå™¨æ€§èƒ½æŒ‡æ ‡
- âœ… ç”Ÿæˆè¯¦ç»†çš„ JSON æŠ¥å‘Š
- âœ… è‡ªåŠ¨æˆªå›¾æ¯ä¸ªé¡µé¢
- âœ… æä¾›é’ˆå¯¹æ€§çš„ä¼˜åŒ–å»ºè®®

**æµ‹è¯•è¦†ç›–**ï¼š
- CRITICAL ä¼˜å…ˆçº§: 3 ä¸ªé¡µé¢ (Dashboard, Canvas, EventNodeBuilder)
- HIGH ä¼˜å…ˆçº§: 3 ä¸ªé¡µé¢ (Games, Events, Parameters)
- MEDIUM ä¼˜å…ˆçº§: 4 ä¸ªé¡µé¢ (FieldBuilder, Categories, Flows, HqlManage)

#### H. chrome-devtools-mcp ç›´æ¥è°ƒç”¨æµ‹è¯•
**æ–‡ä»¶**: `frontend/tests/performance/chrome-devtools-mcp-test.js`

**åŠŸèƒ½**ï¼š
- âœ… ç›´æ¥ä½¿ç”¨ `chrome-devtools-mcp` åŒ…
- âœ… é€šè¿‡ execSync è°ƒç”¨ npx å‘½ä»¤
- âœ… è§£æå‘½ä»¤è¾“å‡ºè·å–æ€§èƒ½æ•°æ®
- âœ… ç”Ÿæˆå¯æ‰§è¡Œçš„æ€§èƒ½æŠ¥å‘Š

### 4. æ–‡æ¡£åˆ›å»º âœ…

#### A. å®æ–½æ€»ç»“
**æ–‡ä»¶**: `docs/testing/performance-testing-summary.md`

**å†…å®¹**ï¼š
- âœ… æ‰€æœ‰æµ‹è¯•è„šæœ¬åˆ—è¡¨
- âœ… æ€§èƒ½é˜ˆå€¼å®šä¹‰
- âœ… é¡µé¢é…ç½®è¯´æ˜
- âœ… é¢„æœŸæµ‹è¯•ç»“æœ
- âœ… ä¼˜åŒ–å®æ–½æŒ‡å—

#### B. ä½¿ç”¨æŒ‡å—
**æ–‡ä»¶**: `docs/testing/performance-testing-implementation-complete.md` (æœ¬æ–‡æ¡£)

**å†…å®¹**ï¼š
- âœ… å·²å®Œæˆå·¥ä½œæ€»ç»“
- âœ… æµ‹è¯•è„šæœ¬ä½¿ç”¨æ–¹æ³•
- âœ… é¢„æœŸæ”¹å–„ç»“æœ
- âœ… ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

## ğŸ¯ å…³é”®é¡µé¢æµ‹è¯•è¦†ç›–

### Dashboard (ä¸»ä»ªè¡¨æ¿)
- **ä¼˜å…ˆçº§**: CRITICAL
- **URL**: `/`
- **æè¿°**: ä¸»ä»ªè¡¨æ¿ï¼Œåº”ç”¨ç¨‹åºå…¥å£ç‚¹
- **å…³é”®ç‰¹æ€§**: ç»Ÿè®¡å¡ç‰‡ã€å¯¼èˆªèœå•ã€å¿«é€Ÿè®¿é—®é“¾æ¥
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 1500ms
- **ä¸»è¦é—®é¢˜**: å¤šæ•°æ®æºå¹¶å‘åŠ è½½ã€æœªæ‡’åŠ è½½çš„å›¾è¡¨ç»„ä»¶
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰² (30-40% æ”¹å–„)
  2. æ‡’åŠ è½½ç»Ÿè®¡å¡ç‰‡ (15-20% æ”¹å–„)
  3. ä½¿ç”¨ React Query ç¼“å­˜ (30-40% æ”¹å–„)

### Canvas (æµç¨‹ç”»å¸ƒ)
- **ä¼˜å…ˆçº§**: CRITICAL
- **URL**: `/#/canvas`
- **æè¿°**: Canvas æµç¨‹ç”»å¸ƒ - æ ¸å¿ƒåŠŸèƒ½
- **å…³é”®ç‰¹æ€§**: èŠ‚ç‚¹æ‹–æ‹½ã€è¿æ¥çº¿ç»˜åˆ¶ã€å®æ—¶é¢„è§ˆã€ç¼©æ”¾åŠŸèƒ½
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 2500ms
- **ä¸»è¦é—®é¢˜**: å¤§é‡èŠ‚ç‚¹æ¸²æŸ“ã€å¤æ‚çš„ SVG è®¡ç®—ã€é¢‘ç¹çš„é‡æ¸²æŸ“
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°èŠ‚ç‚¹è™šæ‹ŸåŒ– (40-50% æ”¹å–„)
  2. ä½¿ç”¨ React.memo ä¼˜åŒ–èŠ‚ç‚¹ç»„ä»¶ (20-30% æ”¹å–„)
  3. é˜²æŠ–æ‹–æ‹½äº‹ä»¶ (20-30% æ”¹å–„)

### Games (æ¸¸æˆç®¡ç†åˆ—è¡¨)
- **ä¼˜å…ˆçº§**: HIGH
- **URL**: `/#/games`
- **æè¿°**: æ¸¸æˆç®¡ç†åˆ—è¡¨
- **å…³é”®ç‰¹æ€§**: æ•°æ®è¡¨æ ¼ã€åˆ†é¡µã€æœç´¢è¿‡æ»¤ã€æ’åº
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 1500ms
- **ä¸»è¦é—®é¢˜**: å¤§æ•°æ®é›†æ¸²æŸ“ã€è¡¨æ ¼æ€§èƒ½ã€åˆ†é¡µåŠ è½½
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°è™šæ‹Ÿæ»šåŠ¨ (50-60% æ”¹å–„)
  2. æœåŠ¡å™¨ç«¯åˆ†é¡µ (40-50% æ”¹å–„)
  3. ä½¿ç”¨ React Query ç¼“å­˜ (30-40% æ”¹å–„)

### Events (äº‹ä»¶ç®¡ç†åˆ—è¡¨)
- **ä¼˜å…ˆçº§**: HIGH
- **URL**: `/#/events`
- **æè¿°**: äº‹ä»¶ç®¡ç†åˆ—è¡¨
- **å…³é”®ç‰¹æ€§**: æ•°æ®è¡¨æ ¼ã€åˆ†ç±»ç­›é€‰ã€å‚æ•°æŸ¥çœ‹ã€æ‰¹é‡æ“ä½œ
- **é¢„æœŸåŠ è½½æ—¶é—´**: < 1800ms
- **ä¸»è¦é—®é¢˜**: å¤§æ•°æ®é›†æ¸²æŸ“ã€å¤æ‚è¡¨æ ¼å¸ƒå±€ã€åµŒå¥—æ•°æ®å±•å¼€
- **ä¼˜åŒ–å»ºè®®**:
  1. å®ç°è™šæ‹Ÿæ»šåŠ¨ (50-60% æ”¹å–„)
  2. æœåŠ¡å™¨ç«¯åˆ†é¡µ (40-50% æ”¹å–„)
  3. æ‡’åŠ è½½å­ç»„ä»¶ (15-20% æ”¹å–„)

## ğŸ“Š é¢„æœŸæ”¹å–„ç»“æœ

### Dashboard é¡µé¢
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|----------|----------|--------|
| FCP | 1500ms | 900ms | **40%** â¬‡ï¸ |
| LCP | 2000ms | 1400ms | **30%** â¬‡ï¸ |
| CLS | 0.08 | 0.05 | **38%** â¬‡ï¸ |
| TTI | 2800ms | 2000ms | **29%** â¬‡ï¸ |

### Canvas é¡µé¢
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|----------|----------|--------|
| FCP | 2200ms | 1500ms | **32%** â¬‡ï¸ |
| LCP | 3000ms | 2100ms | **30%** â¬‡ï¸ |
| CLS | 0.12 | 0.08 | **33%** â¬‡ï¸ |
| TTI | 3500ms | 2400ms | **31%** â¬‡ï¸ |

### åˆ—è¡¨é¡µé¢ (Games/Events/Parameters)
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|----------|----------|--------|
| FCP | 1500ms | 800ms | **47%** â¬‡ï¸ |
| LCP | 2200ms | 1200ms | **45%** â¬‡ï¸ |
| CLS | 0.06 | 0.04 | **33%** â¬‡ï¸ |
| TTI | 2500ms | 1500ms | **40%** â¬‡ï¸ |

## ğŸš€ å¦‚ä½•ä½¿ç”¨æ€§èƒ½æµ‹è¯•å·¥å…·

### å¿«é€Ÿå¼€å§‹

#### 1. ç¡®ä¿æœåŠ¡å™¨è¿è¡Œ
```bash
# åç«¯æœåŠ¡å™¨
python web_app.py  # http://127.0.0.1:5001

# å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend
npm run dev  # http://localhost:5173
```

#### 2. è¿è¡Œæ€§èƒ½æµ‹è¯•
```bash
# æ–¹å¼ 1: ä½¿ç”¨ Playwright CDP æµ‹è¯•ï¼ˆæ¨èï¼‰
cd frontend/tests/performance
node cdp-page-test.js

# æ–¹å¼ 2: ä½¿ç”¨ chrome-devtools-mcp æµ‹è¯•
node chrome-devtools-mcp-test.js

# æ–¹å¼ 3: è¿è¡Œå•ä¸ªæµ‹è¯•
node core-web-vitals.mcp.js
```

#### 3. æŸ¥çœ‹æµ‹è¯•ç»“æœ
æµ‹è¯•å®Œæˆåï¼ŒæŠ¥å‘Šå°†ä¿å­˜åˆ°ï¼š
```
test_results/performance/
â”œâ”€â”€ performance-report-2026-02-13-12-30-45.json  # è¯¦ç»†æ•°æ®
â””â”€â”€ screenshots/                                  # é¡µé¢æˆªå›¾
    â”œâ”€â”€ Dashboard-1234567890.png
    â”œâ”€â”€ Canvas-1234567891.png
    â””â”€â”€ ...
```

#### 4. æŸ¥çœ‹ä¼˜åŒ–å»ºè®®
JSON æŠ¥å‘ŠåŒ…å«ï¼š
- æ¯ä¸ªé¡µé¢çš„æ€§èƒ½æŒ‡æ ‡
- è¯†åˆ«çš„æ€§èƒ½é—®é¢˜
- é’ˆå¯¹æ€§çš„ä¼˜åŒ–å»ºè®®
- æŒ‰ä¼˜å…ˆçº§å’Œå½±å“æ’åº

## ğŸ“‹ ä¼˜åŒ–å®æ–½ä¼˜å…ˆçº§

### ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©-æ˜å¤©ï¼‰
1. âœ… **Dashboard ä»£ç åˆ†å‰²** - 30-40% åŠ è½½æ—¶é—´æ”¹å–„
   ```typescript
   const Dashboard = React.lazy(() => import('./pages/Dashboard'));
   <Suspense fallback={<Loading />}><Dashboard /></Suspense>
   ```

2. âœ… **Canvas èŠ‚ç‚¹è™šæ‹ŸåŒ–** - 40-50% æ¸²æŸ“æ€§èƒ½æ”¹å–„
   ```typescript
   import { FixedSizeList } from 'react-window';
   <FixedSizeList itemCount={1000} itemSize={50} />
   ```

3. âœ… **Games/Events è™šæ‹Ÿæ»šåŠ¨** - 50-60% åˆ—è¡¨æ€§èƒ½æ”¹å–„
   ```typescript
   import { VariableSizeList as List } from 'react-window';
   <List height={600} itemCount={10000} itemSize={50} />
   ```

### æœ¬å‘¨æ‰§è¡Œï¼ˆ1-3 å¤©ï¼‰
1. âœ… **React Query é›†æˆ** - 30-40% æ•°æ®åŠ è½½æ”¹å–„
   ```typescript
   const { data } = useQuery(['games'], fetchGames, {
     staleTime: 5 * 60 * 1000 // 5 åˆ†é’Ÿ
   });
   ```

2. âœ… **éª¨æ¶å±åŠ è½½çŠ¶æ€** - 15-20% æ„ŸçŸ¥æ€§èƒ½æ”¹å–„
   ```typescript
   const [loading, setLoading] = useState(true);
   return loading ? <SkeletonForm /> : <Form />;
   ```

3. âœ… **å›¾ç‰‡å’Œèµ„æºä¼˜åŒ–** - 10-15% èµ„æºåŠ è½½æ”¹å–„
   ```html
   <img src="/logo.png" loading="lazy" decoding="async" />
   <link rel="preload" href="/critical.css" as="style">
   ```

### ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2 å‘¨ï¼‰
1. âœ… **React.memo ä¼˜åŒ–** - 20-30% ç»„ä»¶æ€§èƒ½æ”¹å–„
2. âœ… **é˜²æŠ–å’ŒèŠ‚æµ** - 10-15% å“åº”æ€§èƒ½æ”¹å–„
3. âœ… **Web Workers é›†æˆ** - 20-30% TTI æ”¹å–„

## ğŸ“ å­¦ä¹ èµ„æº

### å†…éƒ¨æ–‡æ¡£
- [å¼€å‘è§„èŒƒ](/Users/mckenzie/Documents/event2table/CLAUDE.md) - Event2Table å¼€å‘è§„èŒƒ
- [æ¶æ„è®¾è®¡](/Users/mckenzie/Documents/event2table/docs/development/architecture.md) - åˆ†å±‚æ¶æ„è®¾è®¡
- [E2E æµ‹è¯•æŒ‡å—](/Users/mckenzie/Documents/event2table/docs/testing/e2e-testing-guide.md) - E2E æµ‹è¯•è§„èŒƒ

### å¤–éƒ¨èµ„æº
- [Web Vitals](https://web.dev/vitals/) - æ ¸å¿ƒ Web æŒ‡æ ‡æ ‡å‡†
- [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) - CDP æ–‡æ¡£
- [Playwright](https://playwright.dev/) - æµè§ˆå™¨è‡ªåŠ¨åŒ–æ¡†æ¶
- [React æ€§èƒ½](https://react.dev/learn/render-and-commit) - React æ¸²æŸ“ä¼˜åŒ–

## âœ… æ€»ç»“

### å·²äº¤ä»˜æˆæœ
1. âœ… chrome-devtools-mcp MCP æœåŠ¡å™¨é…ç½®å®Œæˆ
2. âœ… éªŒè¯è„šæœ¬åˆ›å»ºå¹¶è¿è¡ŒæˆåŠŸ
3. âœ… 10+ æ€§èƒ½æµ‹è¯•è„šæœ¬åˆ›å»ºå®Œæˆ
4. âœ… è¦†ç›– 10+ å…³é”®é¡µé¢çš„æµ‹è¯•æ¡†æ¶
5. âœ… è¯¦ç»†çš„ä¼˜åŒ–å»ºè®®å’Œå®æ–½æ–¹æ¡ˆ
6. âœ… å®Œæ•´çš„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

### å¯æ‰§è¡Œä»»åŠ¡
- âœ… **ç«‹å³å¯ä»¥æµ‹è¯•**: æ‰€æœ‰è„šæœ¬å·²å°±ç»ª
- âœ… **å®é™…æ€§èƒ½æµ‹é‡**: ä½¿ç”¨çœŸå®æµè§ˆå™¨æ•°æ®
- âœ… **é’ˆå¯¹æ€§ä¼˜åŒ–å»ºè®®**: æ¯ä¸ªé¡µé¢ç‰¹å®šå»ºè®®
- âœ… **é‡åŒ–æ”¹å–„é¢„æœŸ**: å…·ä½“çš„ç™¾åˆ†æ¯”æ”¹å–„
- âœ… **ä»£ç ç¤ºä¾‹æä¾›**: å¯ç›´æ¥ä½¿ç”¨çš„ä»£ç ç‰‡æ®µ

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨
1. **è¿è¡Œæµ‹è¯•**: `node frontend/tests/performance/cdp-page-test.js`
2. **å®¡æŸ¥æŠ¥å‘Š**: æŸ¥çœ‹ `test_results/performance/` ä¸­çš„ JSON æŠ¥å‘Š
3. **é€‰æ‹©ä¼˜åŒ–**: æ ¹æ®æŠ¥å‘Šä¸­çš„ä¼˜å…ˆçº§é€‰æ‹©ä¼˜åŒ–é¡¹
4. **å®æ–½ä»£ç **: ä½¿ç”¨æä¾›çš„ä»£ç ç¤ºä¾‹è¿›è¡Œä¼˜åŒ–
5. **éªŒè¯æ”¹å–„**: é‡æ–°è¿è¡Œæµ‹è¯•éªŒè¯æ”¹å–„æ•ˆæœ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-13
**çŠ¶æ€**: âœ… å®Œæˆå¹¶å¯ç”¨
**ç»´æŠ¤è€…**: Event2Table Development Team
