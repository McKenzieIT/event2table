# Event2Table ç¼“å­˜ç³»ç»Ÿæ–‡æ¡£ä¸­å¿ƒ

> **ç‰ˆæœ¬**: 1.0 | **æœ€åæ›´æ–°**: 2026-02-25
>
> æ¬¢è¿ä½¿ç”¨Event2Tableç¼“å­˜ç³»ç»Ÿï¼æœ¬æ–‡æ¡£ä¸­å¿ƒæä¾›å®Œæ•´çš„ç¼“å­˜ç³»ç»Ÿä½¿ç”¨æŒ‡å—ã€‚

---

## ğŸš€ å¿«é€Ÿå¯¼èˆª

### æˆ‘æ˜¯æ–°ç”¨æˆ·ï¼Œæƒ³å¿«é€Ÿä¸Šæ‰‹

â†’ ä»è¿™é‡Œå¼€å§‹ï¼š**[5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹æŒ‡å—](quickstart/5-minute-guide.md)**

**ä½ å°†å­¦åˆ°**ï¼š
- âœ… ç¼“å­˜å¸¦æ¥çš„3ä¸ªæ ¸å¿ƒä»·å€¼ï¼ˆæ€§èƒ½æå‡100-1000å€ï¼‰
- âœ… 3æ­¥å¿«é€Ÿé…ç½®ï¼ˆéªŒè¯Redisã€å¯ç”¨è£…é¥°å™¨ã€éªŒè¯ç¼“å­˜ï¼‰
- âœ… å¦‚ä½•éªŒè¯ç¼“å­˜ç”Ÿæ•ˆ

**é¢„è®¡æ—¶é—´**: 5åˆ†é’Ÿ

---

### æˆ‘é‡åˆ°äº†é—®é¢˜ï¼Œéœ€è¦å¸®åŠ©

â†’ æŸ¥é˜…ï¼š**[æ•…éšœæ’é™¤æ‰‹å†Œ](operations/troubleshooting.md)** æˆ– **[å¸¸è§é—®é¢˜FAQ](quickstart/faq.md)**

**åŒ…å«å†…å®¹**ï¼š
- ğŸ”´ P0ç´§æ€¥æ•…éšœï¼ˆRedisè¿æ¥å¤±è´¥ã€ç¼“å­˜å‘½ä¸­ç‡éª¤é™ï¼‰
- ğŸŸ¡ P1å¸¸è§é—®é¢˜ï¼ˆæ•°æ®ä¸ä¸€è‡´ã€ç‰¹å®šç¼“å­˜æœªç”Ÿæ•ˆï¼‰
- ğŸŸ¢ P2æ¬¡è¦é—®é¢˜ï¼ˆç»Ÿè®¡ä¸å‡†ç¡®ã€æ—¥å¿—è­¦å‘Šï¼‰

**é¢„è®¡æ—¶é—´**: 10åˆ†é’Ÿè§£å†³é—®é¢˜

---

### æˆ‘æ˜¯å¼€å‘è€…ï¼Œæƒ³æ·±å…¥äº†è§£

â†’ é˜…è¯»ï¼š**[å¼€å‘è€…æŒ‡å—](development/developer-guide.md)**

**åŒ…å«å†…å®¹**ï¼š
- ğŸ“ ç³»ç»Ÿæ¶æ„ï¼ˆä¸‰çº§åˆ†å±‚ç¼“å­˜è®¾è®¡ï¼‰
- ğŸ”§ è£…é¥°å™¨è¯¦è§£ï¼ˆ@cachedã€@cache_invalidateï¼‰
- âš¡ é«˜çº§åŠŸèƒ½ï¼ˆBloom Filterã€æ™ºèƒ½é¢„çƒ­ã€ç¼“å­˜é™çº§ï¼‰
- ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ï¼ˆæ‰¹é‡æŸ¥è¯¢ã€å¹¶å‘è¯»å–ï¼‰

**é¢„è®¡æ—¶é—´**: 30åˆ†é’Ÿ

---

### æˆ‘æ˜¯è¿ç»´äººå‘˜ï¼Œå‡†å¤‡éƒ¨ç½²

â†’ æŸ¥çœ‹ï¼š**[éƒ¨ç½²è¿ç»´æ–‡æ¡£](operations/deployment.md)**

**åŒ…å«å†…å®¹**ï¼š
- âœ… éƒ¨ç½²å‰å‡†å¤‡ï¼ˆç³»ç»Ÿè¦æ±‚ã€ä¾èµ–æ£€æŸ¥ï¼‰
- ğŸ“Š ç›‘æ§æŒ‡æ ‡ï¼ˆå‘½ä¸­ç‡ã€å“åº”æ—¶é—´ã€å†…å­˜ä½¿ç”¨ï¼‰
- ğŸ”§ æ€§èƒ½è°ƒä¼˜ï¼ˆTTLä¼˜åŒ–ã€å¹¶å‘ä¼˜åŒ–ã€å†…å­˜ä¼˜åŒ–ï¼‰
- ğŸ“ˆ å®¹é‡è§„åˆ’ï¼ˆè¯„ä¼°å…¬å¼ã€å®ä¾‹è§„æ ¼å»ºè®®ï¼‰

**é¢„è®¡æ—¶é—´**: 1å°æ—¶

---

### æˆ‘éœ€è¦å¸¸ç”¨ä»£ç ç¤ºä¾‹

â†’ æµè§ˆï¼š**[ä»£ç ç‰‡æ®µå‚è€ƒ](quickstart/code-snippets.md)**

**åŒ…å«å†…å®¹**ï¼š
- ğŸŸ¢ åŸºç¡€ç”¨æ³•ï¼ˆç®€å•ç¼“å­˜ã€å‚æ•°åŒ–ç¼“å­˜ã€ç¼“å­˜å¤±æ•ˆï¼‰
- ğŸŸ¡ é«˜çº§ç”¨æ³•ï¼ˆå±‚çº§ç¼“å­˜ã€Bloom Filterã€æ™ºèƒ½é¢„çƒ­ï¼‰
- ğŸ”§ å·¥å…·å‡½æ•°ï¼ˆæ‰¹é‡æ¸…ç†ã€é¢„çƒ­ç¼“å­˜ã€ç›‘æ§ç»Ÿè®¡ï¼‰
- ğŸš€ æ€§èƒ½ä¼˜åŒ–ï¼ˆæ‰¹é‡æŸ¥è¯¢ã€ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼‰

**é¢„è®¡æ—¶é—´**: å³æŸ¥å³ç”¨

---

## ğŸ“š æ–‡æ¡£ä½“ç³»ç»“æ„

```
docs/cache/
â”œâ”€â”€ README.md                           # â­ ä½ åœ¨è¿™é‡Œ
â”œâ”€â”€ quickstart/                         # Level 1: å¿«é€Ÿä¸Šæ‰‹ï¼ˆæ–°ç”¨æˆ·ï¼‰
â”‚   â”œâ”€â”€ 5-minute-guide.md                # 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ faq.md                           # å¸¸è§é—®é¢˜FAQ
â”‚   â””â”€â”€ code-snippets.md                 # ä»£ç ç‰‡æ®µå‚è€ƒ
â”œâ”€â”€ development/                        # Level 2: å¼€å‘æŒ‡å—ï¼ˆå¼€å‘è€…ï¼‰
â”‚   â”œâ”€â”€ developer-guide.md               # å¼€å‘è€…å®Œæ•´æŒ‡å—
â”‚   â”œâ”€â”€ api-reference.md                 # APIå¿«é€Ÿå‚è€ƒï¼ˆå¾…è¡¥å……ï¼‰
â”‚   â”œâ”€â”€ best-practices.md                # æœ€ä½³å®è·µï¼ˆå¾…è¡¥å……ï¼‰
â”‚   â””â”€â”€ migration-guide.md               # è¿ç§»æŒ‡å—ï¼ˆå¾…è¡¥å……ï¼‰
â”œâ”€â”€ operations/                          # Level 3: è¿ç»´æ‰‹å†Œï¼ˆè¿ç»´äººå‘˜ï¼‰
â”‚   â”œâ”€â”€ deployment.md                    # éƒ¨ç½²è¿ç»´æ–‡æ¡£
â”‚   â”œâ”€â”€ troubleshooting.md               # æ•…éšœæ’é™¤æ‰‹å†Œ
â”‚   â”œâ”€â”€ monitoring.md                    # ç›‘æ§å’Œå‘Šè­¦ï¼ˆå¾…è¡¥å……ï¼‰
â”‚   â””â”€â”€ performance-tuning.md            # æ€§èƒ½è°ƒä¼˜ï¼ˆå¾…è¡¥å……ï¼‰
â””â”€â”€ architecture/                        # Level 4: æ¶æ„æ–‡æ¡£ï¼ˆæ¶æ„å¸ˆï¼‰
    â”œâ”€â”€ system-design.md                 # ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ˆå¾…è¡¥å……ï¼‰
    â”œâ”€â”€ technical-reports.md             # æŠ€æœ¯æŠ¥å‘Šç´¢å¼•ï¼ˆå¾…è¡¥å……ï¼‰
    â””â”€â”€ test-reports.md                  # æµ‹è¯•æŠ¥å‘Šç´¢å¼•ï¼ˆå¾…è¡¥å……ï¼‰
```

---

## ğŸ¯ æŒ‰è§’è‰²æŸ¥æ‰¾æ–‡æ¡£

| è§’è‰² | æ¨èæ–‡æ¡£ | ä¼˜å…ˆçº§ |
|------|---------|--------|
| **æ–°ç”¨æˆ·** | 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹ â†’ FAQ | P0 |
| **åç«¯å¼€å‘è€…** | å¼€å‘è€…æŒ‡å— â†’ ä»£ç ç‰‡æ®µ â†’ FAQ | P0 |
| **å‰ç«¯å¼€å‘è€…** | FAQï¼ˆäº†è§£ç¼“å­˜APIï¼‰ | P1 |
| **è¿ç»´äººå‘˜** | éƒ¨ç½²è¿ç»´æ–‡æ¡£ â†’ æ•…éšœæ’é™¤æ‰‹å†Œ | P0 |
| **æ¶æ„å¸ˆ** | ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ˆå¾…è¡¥å……ï¼‰ | P2 |
| **æµ‹è¯•å·¥ç¨‹å¸ˆ** | æµ‹è¯•æŒ‡å—ï¼ˆå¼€å‘è€…æŒ‡å—ç¬¬7èŠ‚ï¼‰ | P1 |

---

## âš¡ å¿«é€Ÿå‚è€ƒ

### æœ€å¸¸ä½¿ç”¨çš„3ä¸ªè£…é¥°å™¨

```python
from backend.core.cache.decorators import cached, cache_invalidate

# 1. ç¼“å­˜æŸ¥è¯¢ç»“æœ
@cached(ttl=3600)
def get_events(game_gid: int):
    return fetch_all_as_dict('SELECT * FROM log_events WHERE game_gid = ?', (game_gid,))

# 2. è‡ªåŠ¨æ¸…ç†ç¼“å­˜
@cache_invalidate
def update_event(event_id: int, data: dict):
    execute_update('UPDATE log_events SET ... WHERE id = ?', (event_id,))

# 3. è‡ªå®šä¹‰ç¼“å­˜é”®
@cached(ttl=1800, key_prefix="events:game")
def get_events_by_game(game_gid: int):
    return fetch_all_as_dict('SELECT * FROM log_events WHERE game_gid = ?', (game_gid,))
```

### æœ€å¸¸é‡åˆ°çš„3ä¸ªé—®é¢˜

| é—®é¢˜ | å¿«é€Ÿè§£å†³ | è¯¦ç»†æ–‡æ¡£ |
|------|---------|---------|
| **ç¼“å­˜æœªç”Ÿæ•ˆ** | æ£€æŸ¥TTLæ˜¯å¦>0 | [FAQ Q1](quickstart/faq.md#q1-ç¼“å­˜å’Œæ•°æ®åº“æœ‰ä»€ä¹ˆåŒºåˆ«) |
| **æ•°æ®ä¸ä¸€è‡´** | ä½¿ç”¨@cache_invalidate | [FAQ Q7](quickstart/faq.md#q7-ç¼“å­˜æ•°æ®ä¸ä¸€è‡´æ€ä¹ˆåŠ) |
| **Redisè¿æ¥å¤±è´¥** | æ£€æŸ¥`redis-cli ping` | [æ•…éšœæ’é™¤P0-1](operations/troubleshooting.md#é—®é¢˜1-æ‰€æœ‰apiè¿”å›500é”™è¯¯) |

### æœ€å¸¸ä½¿ç”¨çš„3ä¸ªå‘½ä»¤

```bash
# 1. æ£€æŸ¥RedisæœåŠ¡
redis-cli ping  # åº”è¾“å‡º: PONG

# 2. æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
curl http://127.0.0.1:5001/api/cache/stats

# 3. æŸ¥çœ‹ç‰¹å®šç¼“å­˜
redis-cli GET "cache:games:10000147"
```

---

## ğŸ“Š ç¼“å­˜ç³»ç»Ÿæ€§èƒ½æ¦‚è§ˆ

| æŒ‡æ ‡ | æ— ç¼“å­˜ | æœ‰ç¼“å­˜ | æå‡å€æ•° |
|------|--------|--------|---------|
| **å“åº”æ—¶é—´** | 500ms | 5ms (L1) / 50ms (L2) | **100-1000å€** |
| **æ•°æ®åº“è´Ÿè½½** | 100% | 20% | **é™ä½80%** |
| **å¹¶å‘èƒ½åŠ›** | 100 QPS | 10000 QPS | **100å€** |
| **ç¼“å­˜å‘½ä¸­ç‡** | N/A | 80-90% | - |

---

## ğŸ” æ–‡æ¡£ä½¿ç”¨æŒ‡å—

### å¦‚ä½•æ‰¾åˆ°éœ€è¦çš„æ–‡æ¡£ï¼Ÿ

**1. æŒ‰é—®é¢˜ç±»å‹æŸ¥æ‰¾**
```
é—®é¢˜ï¼šç¼“å­˜æœªç”Ÿæ•ˆ
â†’ å¿«é€Ÿå¼€å§‹ > éªŒè¯ç¼“å­˜ç”Ÿæ•ˆ
æˆ–
â†’ FAQ > Q1: ç¼“å­˜å’Œæ•°æ®åº“æœ‰ä»€ä¹ˆåŒºåˆ«

é—®é¢˜ï¼šRedisè¿æ¥å¤±è´¥
â†’ æ•…éšœæ’é™¤æ‰‹å†Œ > P0é—®é¢˜1
æˆ–
â†’ éƒ¨ç½²è¿ç»´æ–‡æ¡£ > æ•…éšœæ¢å¤
```

**2. æŒ‰å­¦ä¹ è·¯å¾„æŸ¥æ‰¾**
```
æ–°ç”¨æˆ·è·¯å¾„:
å¿«é€Ÿå¼€å§‹ (5åˆ†é’Ÿ) â†’ FAQ (æŒ‰éœ€) â†’ ä»£ç ç‰‡æ®µ (å®è·µ)

å¼€å‘è€…è·¯å¾„:
å¿«é€Ÿå¼€å§‹ â†’ å¼€å‘è€…æŒ‡å— â†’ APIå‚è€ƒ â†’ æœ€ä½³å®è·µ

è¿ç»´è·¯å¾„:
éƒ¨ç½²è¿ç»´æ–‡æ¡£ â†’ æ•…éšœæ’é™¤æ‰‹å†Œ â†’ ç›‘æ§å‘Šè­¦
```

**3. æŒ‰æ–‡æ¡£ç±»å‹æŸ¥æ‰¾**
```
å¿«é€Ÿå…¥é—¨: quickstart/ ç›®å½•
æ·±åº¦å­¦ä¹ : development/ ç›®å½•
è¿ç»´éƒ¨ç½²: operations/ ç›®å½•
æ¶æ„è®¾è®¡: architecture/ ç›®å½•
```

---

## ğŸ†˜ è·å–å¸®åŠ©

### æ–‡æ¡£æ— æ³•è§£å†³é—®é¢˜ï¼Ÿ

1. **æ”¶é›†è¯Šæ–­ä¿¡æ¯**:
   ```bash
   bash scripts/diagnose_cache.sh > cache_diagnostic.txt
   ```

2. **æŸ¥çœ‹åº”ç”¨æ—¥å¿—**:
   ```bash
   tail -n 500 logs/app.log | grep -i cache
   ```

3. **è”ç³»æŠ€æœ¯æ”¯æŒ**:
   - é‚®ä»¶: support@example.com
   - Slack: #cache-support
   - Issue: GitHub Issues

---

## ğŸ“ æ–‡æ¡£æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 1.0 | 2026-02-25 | åˆå§‹ç‰ˆæœ¬ - å®Œæ•´çš„æ–‡æ¡£ä½“ç³»å»ºç«‹ |

---

## ğŸ”— å¤–éƒ¨èµ„æº

- **Rediså®˜æ–¹æ–‡æ¡£**: https://redis.io/docs/
- **Python redis-py**: https://redis-py.readthedocs.io/
- **Bloom Filterç®—æ³•**: https://en.wikipedia.org/wiki/Bloom_filter
- **LRUç¼“å­˜**: https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)

---

## ğŸ“„ è®¸å¯è¯

æœ¬æ–‡æ¡£éµå¾ªé¡¹ç›®è®¸å¯è¯ï¼šMIT License

---

**å¼€å§‹ä½¿ç”¨ç¼“å­˜ç³»ç»Ÿï¼Œæå‡åº”ç”¨æ€§èƒ½ï¼** ğŸš€

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œè¯·ä» [5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹æŒ‡å—](quickstart/5-minute-guide.md) å¼€å§‹ã€‚
